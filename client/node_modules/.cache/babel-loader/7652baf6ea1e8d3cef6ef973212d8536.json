{"ast":null,"code":"import _defineProperty from\"/Users/leoniangela/Downloads/Uni Year 3/Year 3 Sem 2/IT Project/ITProject/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/leoniangela/Downloads/Uni Year 3/Year 3 Sem 2/IT Project/ITProject/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/leoniangela/Downloads/Uni Year 3/Year 3 Sem 2/IT Project/ITProject/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/leoniangela/Downloads/Uni Year 3/Year 3 Sem 2/IT Project/ITProject/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/leoniangela/Downloads/Uni Year 3/Year 3 Sem 2/IT Project/ITProject/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// Import the necessary libraries\nimport React,{useState,useEffect,Component}from\"react\";import SideNav from\"../../components/SideNav\";import DropFileInput from\"./dropFiles/drop-file-input/DropFileInput.jsx\";import TextInsertField from'./TextInsertField.js';import{Link}from\"react-router-dom\";import{useNavigate}from\"react-router-dom\";import FileBase from'react-file-base64';import axios from\"axios\";import Cookies from\"universal-cookie\";// CSS imports\nimport\"./RecordPage.css\";// obtain token from cookie\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var cookies=new Cookies();var token=cookies.get(\"TOKEN\");var feedbackMessages={initial:'',invalid:'The artefact must have a valid name and a picture uploaded',valid:'Adding your artefact'};// Record form to add a new Artefact\nvar RecordForm=function RecordForm(){// Initialize the navigate function\nvar navigate=useNavigate();var _useState=useState(feedbackMessages.initial),_useState2=_slicedToArray(_useState,2),feedback=_useState2[0],setFeedback=_useState2[1];// Change the artefactFiles list if a new file is added or removed\nvar onFileChange=function onFileChange(files){console.log(files);setRecord(record.artefactFiles=files);};// The JSON object that is being constantly updated and sent\nvar initialState={artefactName:\"\",artefactDate:\"\",location:\"\",description:\"\",//tags: \"\",\nartefactImg:\"\"};// React hook to change the state of record\nvar _useState3=useState(initialState),_useState4=_slicedToArray(_useState3,2),record=_useState4[0],setRecord=_useState4[1];// NOT DONE YET\nfunction handleSubmit(e){// Prevent the user from refreshing the page when they input \"enter\"\ne.preventDefault();if(!isValidInput(record)){setFeedback(feedbackMessages.invalid);return;}setFeedback(feedbackMessages.valid);function recordArtefact(_x){return _recordArtefact.apply(this,arguments);}function _recordArtefact(){_recordArtefact=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var configuration;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// set configurations\nconfiguration={method:\"post\",url:\"http://localhost:5100/add-artefact\",data:{record:record},headers:{Authorization:\"Bearer \".concat(token)// authorized route with jwt token\n}};// make the API call\naxios(configuration).then(function(result){window.location.href=\"/dashboard\";}).catch(function(error){error=new Error();console.log(error);});case 2:case\"end\":return _context.stop();}}},_callee);}));return _recordArtefact.apply(this,arguments);}recordArtefact();}// Change the state of the record object based on user input\nfunction handleChange(event){setRecord(_objectSpread(_objectSpread({},record),{},_defineProperty({},event.target.name,event.target.value)));console.log(record);}var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),sideNavOpen=_useState6[0],setSideNavOpen=_useState6[1];var openSideNav=function openSideNav(){setSideNavOpen(true);};var closeSideNav=function closeSideNav(){setSideNavOpen(false);};// Return an HTML of the Record Page\nreturn/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"record-page\",children:[/*#__PURE__*/_jsx(SideNav,{sideNavOpen:sideNavOpen,closeSideNav:closeSideNav}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return handleSubmit(e);},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Add Artefact\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-entry-fields\",children:[/*#__PURE__*/_jsx(TextInsertField,{handleChange:handleChange}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-entry-fields--image-upload\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Upload Image\"}),/*#__PURE__*/_jsx(FileBase,{type:\"file\",name:\"artefactImg\",multiple:false,onDone:function onDone(_ref){var base64=_ref.base64;return setRecord(_objectSpread(_objectSpread({},record),{},{artefactImg:base64}));}}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:record.artefactImg,alt:\"No Images have been Uploaded Yet\"})})]})]}),/*#__PURE__*/_jsx(\"p\",{children:feedback}),/*#__PURE__*/_jsxs(\"div\",{className:\"response-button\",id:\"button\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",children:/*#__PURE__*/_jsx(\"button\",{className:\"response-button__cancel\",type:\"submit\",children:\"Cancel\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"response-button__submit\",type:\"submit\",children:\"Submit\"})]})]})]})});};function isValidInput(data){return data.artefactName!==''&&data.artefactImg!=='';}export default RecordForm;","map":{"version":3,"names":["React","useState","useEffect","Component","SideNav","DropFileInput","TextInsertField","Link","useNavigate","FileBase","axios","Cookies","cookies","token","get","feedbackMessages","initial","invalid","valid","RecordForm","navigate","feedback","setFeedback","onFileChange","files","console","log","setRecord","record","artefactFiles","initialState","artefactName","artefactDate","location","description","artefactImg","handleSubmit","e","preventDefault","isValidInput","recordArtefact","configuration","method","url","data","headers","Authorization","then","result","window","href","catch","error","Error","handleChange","event","target","name","value","sideNavOpen","setSideNavOpen","openSideNav","closeSideNav","base64"],"sources":["/Users/leoniangela/Downloads/Uni Year 3/Year 3 Sem 2/IT Project/ITProject/client/src/pages/Record/RecordPage.js"],"sourcesContent":["// Import the necessary libraries\nimport React, { useState, useEffect, Component } from \"react\";\nimport SideNav from \"../../components/SideNav\";\nimport DropFileInput from \"./dropFiles/drop-file-input/DropFileInput.jsx\";\nimport TextInsertField from './TextInsertField.js';\nimport { Link } from \"react-router-dom\";\nimport { useNavigate } from \"react-router-dom\";\nimport FileBase from 'react-file-base64';\nimport axios from \"axios\";\nimport Cookies from \"universal-cookie\";\n\n// CSS imports\nimport \"./RecordPage.css\";\n\n// obtain token from cookie\nconst cookies = new Cookies();\nconst token = cookies.get(\"TOKEN\");\n\nconst feedbackMessages = {\n    initial: '',\n    invalid: 'The artefact must have a valid name and a picture uploaded',\n    valid:   'Adding your artefact'\n}\n\n// Record form to add a new Artefact\nconst RecordForm = () => {\n  // Initialize the navigate function\n  const navigate = useNavigate();\n  const [feedback, setFeedback] = useState(feedbackMessages.initial);\n\n  // Change the artefactFiles list if a new file is added or removed\n  const onFileChange = (files) => {\n    console.log(files);\n    setRecord((record.artefactFiles = files));\n  };\n\n  // The JSON object that is being constantly updated and sent\n  const initialState = {\n    artefactName: \"\",\n    artefactDate: \"\",\n    location: \"\",\n    description: \"\",\n    //tags: \"\",\n    artefactImg: \"\",\n  };\n\n  // React hook to change the state of record\n  const [record, setRecord] = useState(initialState);\n\n  // NOT DONE YET\n  function handleSubmit(e) {\n\n    // Prevent the user from refreshing the page when they input \"enter\"\n    e.preventDefault();\n\n    if (!isValidInput(record)) {\n        setFeedback(feedbackMessages.invalid);\n        return;\n    }\n\n    setFeedback(feedbackMessages.valid);\n    async function recordArtefact (e) {\n      // set configurations\n      const configuration = {\n        method: \"post\",\n        url: \"http://localhost:5100/add-artefact\",\n        data: {\n          record\n        },\n        headers: {\n          Authorization: `Bearer ${token}`, // authorized route with jwt token\n        },\n      };\n\n\n      // make the API call\n      axios(configuration)\n      .then((result) => {\n        window.location.href = \"/dashboard\"\n      })\n      .catch((error) => {\n        error = new Error();\n        console.log(error)\n      });\n    }\n\n    recordArtefact()\n  }\n\n  // Change the state of the record object based on user input\n  function handleChange(event) {\n    setRecord({ ...record, [event.target.name]: event.target.value });\n    console.log(record);\n  }\n\n  const [sideNavOpen, setSideNavOpen] = useState(false);\n\n  const openSideNav = () => {\n    setSideNavOpen(true);\n  };\n\n  const closeSideNav = () => {\n    setSideNavOpen(false);\n  };\n\n  // Return an HTML of the Record Page\n  return (\n    <>\n      <div className=\"record-page\">\n        {/* Render the side nav*/}\n        <SideNav sideNavOpen={sideNavOpen} closeSideNav={closeSideNav} />\n\n        {/* The form that the user to send to database */}\n        <form onSubmit={(e) => handleSubmit(e)}>\n          <h1>Add Artefact</h1>\n          <div className=\"data-entry-fields\">\n            <TextInsertField handleChange={handleChange}/>\n            {/* Upload Images */}\n            <div className='data-entry-fields--image-upload'>\n              <label>Upload Image</label>\n              <FileBase type=\"file\" name=\"artefactImg\" multiple={false} onDone={({ base64 }) => setRecord({ ...record, artefactImg: base64 })} />\n              <div><img src={record.artefactImg} alt=\"No Images have been Uploaded Yet\" /></div>\n            </div>\n          </div>\n\n          {/* This is the cancel button it just redirects to dashboard */}\n          <p>{feedback}</p>\n          <div className=\"response-button\" id=\"button\">\n            <Link to={`/dashboard`}>\n              <button className=\"response-button__cancel\" type=\"submit\">\n                Cancel\n              </button>\n            </Link>\n            <button className=\"response-button__submit\" type=\"submit\">\n              Submit\n            </button>\n          </div>\n        </form>\n      </div>\n    </>\n  );\n};\n\nfunction isValidInput(data) {\n    return (data.artefactName !== '' && data.artefactImg !== '');\n}\n\n\nexport default RecordForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}