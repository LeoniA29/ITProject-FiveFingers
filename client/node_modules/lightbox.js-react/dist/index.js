function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var t=require("react"),n=e(t),i=require("framer-motion"),o=require("react-bootstrap-icons"),a=require("@silvia-odwyer/react-map-interaction-fork"),r=require("intrinsic-scale"),l=require("react-portal"),c=require("react-zoom-pan-pinch"),s=e(require("react-indiana-drag-scroll")),u=e(require("react-magnifier")),m=e(require("react-swipe")),d=e(require("axios")),h={day:{background:"white",iconColor:"black"},night:{background:"#151515",iconColor:"silver"},lightbox:{background:"rgba(0, 0, 0, 0.4)",iconColor:"silver"}};function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}var f=function(){return"undefined"!=typeof window},v=["children"],p={day:{background:"white",iconColor:"black"},night:{background:"#151515",iconColor:"silver"},lightbox:{background:"rgba(0, 0, 0, 0.4)",iconColor:"silver"}},E={scale:1,translation:{x:0,y:0}},y={visible:{opacity:1,y:0},hidden:{opacity:0,y:100}},S={scale:1,translation:{x:0,y:0}},b={day:{background:"white",iconColor:"black",thumbnailBorder:"solid transparent 2px"},night:{background:"#151515",iconColor:"silver",thumbnailBorder:"solid rgb(138, 138, 138) 2px"},lightbox:{background:"rgba(12, 12, 12, 0.93)",iconColor:"silver",thumbnailBorder:"solid rgb(138, 138, 138) 2px"}},w={x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},C={opacity:{duration:.2}};exports.Image=function(e){var c=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)t.indexOf(n=a[i])>=0||(o[n]=e[n]);return o}(e,v),s=t.useState(!1),u=s[0],m=s[1],d=t.useState(!1),h=d[0],y=d[1],S=t.useState(0),b=S[0],w=S[1],C=(t.useState(!!c.fullScreenImage&&c.fullScreenImage),t.useState(!c.roundedImage||c.roundedImage),t.useState(500)),k=C[0],x=C[1],I=t.useState(426),N=I[0],L=I[1],A=t.useState(c.imgAnimation?c.imgAnimation:"imgMotion-")[1],T=t.useState(c.backgroundColor?c.backgroundColor:p.lightbox.background),M=T[0],F=T[1],q=t.useState(c.iconColor?c.iconColor:p.lightbox.iconColor),O=q[0],z=q[1],j=n.useState()[0],P=t.useState(!0),B=P[0],R=P[1],W=t.useState(E),H=W[0],Z=W[1],_=t.useState(!1),D=_[0],V=_[1],X=t.useRef(null),K=function(e){X.current.parentElement.parentElement.style.cursor=""+e};t.useEffect(function(){var e,t;e=c.image.src,(t=new Image).src=e,t.onload=function(){var e=r.contain(.92*screen.width,.8*screen.height,t.naturalWidth,t.naturalHeight),n=e.width;x(e.height),L(n)},t.onerror=function(e){console.error(e)},c.theme&&p[c.theme]&&(F(p[c.theme].background),z(p[c.theme].iconColor));var n=Y();return function(){n.removeEventListener("change",n)}},[j]);var G=function(){X.current.parentElement.style.transition="transform 0.2s"},J=function(){K("zoom-out"),y(!0),w(b+1)},U=function(){K("zoom-in"),y(!1),w(b-1)},Q=function(){Z({scale:1,translation:{x:0,y:0}})},Y=function(){var e;return f&&((e=window.matchMedia("(prefers-reduced-motion: reduce)"))&&!e.matches||A(null),e.addEventListener("change",void(e.matches&&A(null)))),e};return n.createElement("div",{className:"lightboxjs"},n.createElement(i.AnimatePresence,null,n.createElement(i.motion.img,g({},c,{src:c.image.src,onClick:function(){return m(c.image.title)},whileTap:{scale:.97},style:c.style,className:"cursor-pointer",key:c.image.title})),n.createElement(l.Portal,null,n.createElement(i.AnimatePresence,null,!1!==u&&n.createElement(i.motion.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},key:"imgOverlay",style:{position:"fixed",top:0,left:0,backgroundColor:M,width:"100vw",height:"100vh",zIndex:999999},className:"flex h-screen slideshowAnimContainer",onClick:function(e){return function(e){for(var t=document.getElementsByClassName("imageModal"),n=Array.from(t),i=0;i<n.length;i++)if(n[i].contains(e.target))return;m(!1)}(e)}},n.createElement(i.motion.div,{className:"lightboxContainer"},n.createElement("section",{className:"iconsHeader imageModal",style:{color:O}},n.createElement(i.motion.div,{whileTap:{scale:.95}},n.createElement(o.ZoomIn,{onClick:function(){return J()}})),n.createElement(i.motion.div,{whileTap:{scale:.95}},n.createElement(o.ZoomOut,{onClick:function(){return U()}})),n.createElement(i.motion.div,{whileTap:{scale:.95},className:"closeIcon"},n.createElement(o.XLg,{onClick:function(){Q(),m(!1)}}))),n.createElement(i.motion.div,{className:"imageInnerContainer imageModal"},n.createElement(a.MapInteractionCSS,{maxScale:2.6,minScale:1,disablePan:B,value:H,onChange:function(e){!function(e){R(!1),function(e){e.scale>H.scale?(y(!0),G()):e.scale<H.scale?(y(!1),G()):X.current.parentElement.style.transition=""}(e),Z(e),e.scale==E.scale?(R(!0),Q(),setTimeout(function(){G()},300)):e.scale>E.scale&&!D&&K("all-scroll")}(e)},zoomIn:b},n.createElement(i.motion.img,{src:c.image.src,key:"image",onAnimationComplete:function(){V(!1)},onAnimationStart:function(){V(!0)},className:"m-auto",style:{width:N,height:k},ref:X,onClick:function(e){e.defaultPrevented||(h||D?U():J())}})))))))))},exports.SlideshowLightbox=function(e){var n,a=t.useState([0,0]),d=a[0],h=d[0],v=d[1],p=a[1],E=t.useState(!1),k=E[0],x=E[1],I=t.useState(!1),N=I[0],L=I[1],A=t.useState(e.children?e.children.map(function(e){return e.props}):[]),T=A[0],M=A[1],F=((h-0)%(n=T.length-0)+n)%n+0,q=t.useState({continuous:!0,startSlide:0}),O=q[0],z=q[1],j=t.useState(e.slideshowInterval?e.slideshowInterval:1100)[0],P=t.useState(!e.roundedImages||e.roundedImages),B=P[0],R=P[1],W=t.useState(!e.showControls||e.showControls),H=W[0],Z=W[1],_=t.useState(!!e.lightboxIdentifier&&e.lightboxIdentifier)[0],D=t.useState(!!e.fullScreen&&e.fullScreen)[0],V=(t.useState(e.licenseKey?e.licenseKey:""),t.useState(!1)[1]),X=t.useState(!1)[1],K=t.useState(w)[1],G=t.useState(!0)[1],J=(t.useState(0),t.useState(0)),U=J[0],Q=J[1],Y=t.useState(S)[1],$=t.useState("x")[1],ee=(t.useState(!1),t.useState(!1)),te=ee[0],ne=ee[1],ie=t.useState(!1),oe=ie[0],ae=ie[1],re=t.useState(!1),le=re[0],ce=re[1],se=t.useState(0),ue=se[0],me=se[1],de=t.useState(500),he=de[0],ge=de[1],fe=t.useState(426),ve=fe[0],pe=fe[1],Ee=t.useState(!1),ye=Ee[0],Se=Ee[1],be=(t.useState(!1),t.useState(!1)[1]),we=(t.useState(!1),t.useState(!1),t.useState(!1),t.useRef(null)),Ce=t.useState(null)[1],ke=t.useState([])[0],xe=(t.useState(null),function(e){e&&ke.push(e)}),Ie=t.useState(e.backgroundColor?e.backgroundColor:b.night.background),Ne=Ie[0],Le=Ie[1],Ae=t.useState(e.iconColor?e.iconColor:b.night.iconColor),Te=Ae[0],Me=Ae[1],Fe=t.useState(e.thumbnailBorder?e.thumbnailBorder:b.night.thumbnailBorder),qe=Fe[0],Oe=Fe[1],ze=t.useState(!!e.showThumbnails&&e.showThumbnails),je=ze[0],Pe=ze[1],Be=t.useState(!e.animateThumbnails||e.animateThumbnails)[0],Re=t.useState(e.imgAnimation?e.imgAnimation:"imgDrag")[1],We=t.useState(e.arrowStyle?e.arrowStyle:"dark")[0],He=U<=768,Ze=function(e){var t=e.key;"ArrowLeft"==t?Je(-1):"ArrowRight"==t?Je(1):"Escape"!=t||te||$e()};function _e(){Q(window.innerWidth)}var De,Ve,Xe,Ke,Ge=function(){te&&(function(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.msExitFullscreen&&e.msExitFullscreen()}(document),ne(!1),ot())},Je=function(e){Qe(),ae(!1),Ye(),p([h+e,e]),He&&Ce(we)},Ue=function(e){Ye(),p([h+e,e])},Qe=function(){K(w)},Ye=function(){G(!0),Y({scale:1,translation:{x:0,y:0}}),X(!1)},$e=function(){te&&Ge(),N&&L(!1),Ye(),X(!1),x(!1)},et=function(e){p([e,1]),x(!0)},tt=Array.apply(null,Array(T.length)).map(function(e,n){return t.createElement("div",{key:n},1==oe?t.createElement(u,{src:T[n].src,className:"imageModal mx-auto mt-0 magnifyWrapper",height:he,width:ve,mgShowOverflow:!1,style:{width:ve,height:he}}):t.createElement("div",null,t.createElement(c.TransformWrapper,{ref:xe,onWheel:{wheelEvent:it},onZoom:nt,centerZoomedOut:!0,initialScale:1},t.createElement(c.TransformComponent,{wrapperStyle:{marginLeft:"auto",marginRight:"auto"},contentStyle:{width:"100vw",height:"100vh",marginLeft:"auto",marginRight:"auto"},key:n},t.createElement("img",{className:"mx-auto "+(D?"":"object-contain")+" imageModal "+(B?"rounded-lg":""),src:T[n].src,id:"img"})))))}),nt=function(e,t){console.log("ZOOM EVENT ",e),1==e.state.scale&&(Re("imgDrag"),$("x"),console.log("reinit drag anim"))},it=function(e,t){console.log("WHEEL EVENT ",e),Re("fade"),V(!1)},ot=function(){document.removeEventListener("fullscreenchange",Ge),document.removeEventListener("webkitfullscreenchange",Ge),document.removeEventListener("MSFullscreenChange",Ge),document.removeEventListener("mozfullscreenchange",Ge)};return De=function(){Ue(1)},Ve=N?j:null,Xe=t.useRef(),t.useEffect(function(){Xe.current=De},[De]),t.useEffect(function(){if(null!==Ve){var e=setInterval(function(){Xe.current()},Ve);return function(){return clearInterval(e)}}},[Ve]),t.useEffect(function(){console.log("use effect",e.fullScreen),null!=e.showControls&&Z(e.showControls),f&&Q(window.innerWidth),window.innerWidth<=768&&Re("fade"),document.addEventListener("keydown",Ze),f&&window.addEventListener("resize",_e);var t=function(){var e="";return f&&((e=window.matchMedia("(prefers-reduced-motion: reduce)"))&&!e.matches||Re("fade"),e.addEventListener("change",void(e.matches&&Re("fade")))),e}();if(!ye){if(_){var n=document.querySelectorAll("[data-lightboxjs]"),i=[],o=!1;if(n.length>0){for(var a=function(e){var t=n[e];t.getAttribute("data-lightboxjs")==_&&(t.addEventListener("click",function(){var t=O;t.startSlide=e,z(t),et(e)},!1),t.classList.add("cursor-pointer"),o=!0,i.push({src:t.src,alt:t.alt}))},r=0;r<=n.length-1;r++)a(r);o&&be(!0),M(i)}}else e.children&&M(e.children.filter(function(e){return"img"==e.type}).map(function(e){return e.props}));Se(!0)}return e.theme&&b[e.theme]&&(Le(b[e.theme].background),Me(b[e.theme].iconColor),Oe(b[e.theme].thumbnailBorder)),e.fullScreen&&1==e.fullScreen&&(Re("fade"),R(!1)),function(){f&&(window.removeEventListener("resize",_e),document.removeEventListener("keydown",Ze)),t.removeEventListener("change",t)}},[Ze]),t.createElement("div",{class:e.className+" lightboxjs"},0!=_?e.children:null,0!=_?null:e.children.filter(function(e){return"img"==e.type}).map(function(e,n){return t.createElement("img",g({},e.props,{class:e.props.className+" cursor-pointer",onClick:function(){console.log("hi2");var e=O;e.startSlide=n,z(e),et()},key:n,whileTap:{scale:.97}}))}),t.createElement(i.AnimateSharedLayout,{type:"crossfade"},t.createElement(i.AnimatePresence,{initial:!1},!1!==k&&t.createElement(l.Portal,null,t.createElement(i.motion.div,{className:"slideshowAnimContainer",key:"slideshowAnimContainer",id:"slideshowAnim",initial:{opacity:0,scale:.98},exit:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.2}},t.createElement("div",{className:"lightboxContainer",style:{backgroundColor:Ne}},t.createElement("section",{className:"iconsHeader imageModal "+We+"_header_icon",style:{color:Te}},H&&t.createElement("div",{className:"controls"},t.createElement(i.motion.div,{whileTap:{scale:.95}},t.createElement(o.ZoomIn,{onClick:function(){console.log("zoom refs",ke[ue]),ke[ue].zoomIn()}})),t.createElement(i.motion.div,{whileTap:{scale:.95}},t.createElement(o.ZoomOut,{onClick:function(){console.log("zoom refs ",ke[ue]),ke[ue].zoomOut()}})),t.createElement(i.motion.div,{whileTap:{scale:.95}},t.createElement(te?o.FullscreenExit:o.Fullscreen,{onClick:function(){var e;te?Ge():((e=document.getElementById("slideshowAnim")).requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),ne(!0),document.addEventListener("fullscreenchange",Ge),document.addEventListener("webkitfullscreenchange",Ge),document.addEventListener("MSFullscreenChange",Ge),document.addEventListener("mozfullscreenchange",Ge))}})),t.createElement(i.motion.div,{whileTap:{scale:.95}},t.createElement(o.GridFill,{onClick:function(){Pe(!je)}})),He?null:t.createElement(i.motion.div,{whileTap:{scale:.95}},t.createElement(o.Search,{onClick:function(){return oe?Re("imgDrag"):function(){console.log("Init img dimensions ");var e,t,n=document.getElementById("img");He?(t=.92,e=n.naturalWidth>n.naturalHeight?.65:.57):(t=.92,e=.71);var i=r.contain(screen.width*t,screen.height*e,n.naturalWidth,n.naturalHeight),o=i.width,a=i.height;console.log("Width ",o),console.log("height ",a),ge(a),pe(o)}(),void ae(!oe)}})),t.createElement(i.motion.div,{whileTap:{scale:.95},className:"slideshowPlayBtn"},t.createElement(N?o.PauseCircleFill:o.PlayCircleFill,{onClick:function(){N?(K(w),L(!1)):(ae(!1),K(C),Ue(1),L(!0))}}))),t.createElement(i.motion.div,{whileTap:{scale:.95},className:"closeIcon"},t.createElement(o.XLg,{onClick:function(){$e()}}))),t.createElement("div",{className:"next1 "+We+"_icon imageModal",onClick:function(){me(ue+1),Ke.next(),p([h+1,1])}},t.createElement("span",null,"❯")),t.createElement("div",{className:"prev1 "+We+"_icon imageModal",onClick:function(){me(ue-1),Ke.prev()}},t.createElement("span",null,"❮")),t.createElement(i.AnimatePresence,{initial:!1,custom:v},t.createElement(m,{className:"slideshowInnerContainer  "+(je?"slideshowInnerContainerThumbnails":"")+" ",swipeOptions:O,ref:function(e){return Ke=e},childCount:T.length},tt)),t.createElement("div",{className:"thumbnailsOuterContainer imageModal",style:le?{}:{display:"displayHidden"}},t.createElement(s,{className:"scroll-container",vertical:!1,horizontal:!0},t.createElement(i.AnimatePresence,{initial:Be},!1!==je&&t.createElement(i.motion.div,{initial:"hidden",exit:"hidden",animate:"visible",transition:{type:"spring",duration:.75},variants:y,className:"thumbnails flex justify-centre align-centre gap-2 md:gap-4 rounded-sm mx-auto"},T.map(function(e,n){return t.createElement("img",{className:"thumbnail "+(F===n?"active":""),src:e.src,style:F===n?{border:"solid rgba(107, 133, 206, 0.6) 2px"}:{border:qe},onClick:function(){var e,t;t=(e=n)>h?1:-1,K(C),Ye(),p([e,t]),Ke.slide(e,500)},alt:e.caption,onLoad:function(){return ce(!0)}})})))))))))))},exports.VideoLightbox=function(e){var a=t.useState(!1),r=a[0],l=a[1],c=t.useState(e.iconColor?e.iconColor:h.lightbox.iconColor),s=c[0],u=c[1],m=n.useState(e.backgroundColor?e.backgroundColor:h.lightbox),d=m[0],g=m[1],f=n.useState()[0];return t.useRef(null),n.useEffect(function(){e.theme&&h[e.theme]&&(g(h[e.theme].background),u(h[e.theme].iconColor))},[f]),n.createElement("div",{className:"lightboxjs"},n.createElement(i.AnimateSharedLayout,{type:"crossfade"},n.createElement(i.AnimatePresence,null,!1!==r&&n.createElement(i.motion.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},key:"videoOverlay",style:{position:"fixed",top:0,left:0,backgroundColor:d,width:"100vw",height:"100vh",zIndex:999999},className:"slideshowAnimContainer",onClick:function(){return l(!1)}},n.createElement("div",{className:"lightboxContainer"},n.createElement("section",{className:"iconsHeader imageModal",style:{color:s}},n.createElement(i.motion.div,{whileTap:{scale:.95},className:"closeIcon"},n.createElement(o.XLg,{onClick:function(){l(!1)}}))),n.createElement(i.motion.div,{className:"slideshowInnerContainer imageModal",key:"image",onAnimationComplete:function(){setIsAnimating(!1)},onAnimationStart:function(){setIsAnimating(!0)}},n.createElement(i.motion.video,{layoutId:"vidMotion-"+e.id,className:"cursor-pointer m-auto",key:e.id,controls:!0},n.createElement("source",{src:e.videoSrc,type:"video/mp4"}))))),n.createElement(i.motion.video,{onClick:function(){return l(e.id)},layoutId:"vidMotion-"+e.id,className:"cursor-pointer",key:e.id,width:500,controls:!1,poster:e.posterUrl},n.createElement("source",{src:e.videoSrc,type:"video/mp4"})))))},exports.initLightboxJS=function(e,t){console.log("init lightboxjs"),d.post("https://lightboxjs-server.herokuapp.com/license",{license_key:e,plan_type:t}).then(function(e){e.data.license_valid||console.warn("Lightbox.js: Invalid license key specified, a valid license key must be provided.")}).catch(function(e){console.log(e)})};
//# sourceMappingURL=index.js.map
