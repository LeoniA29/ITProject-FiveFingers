{"version":3,"file":"index.js","sources":["../src/VideoLightbox.js","../src/utility.js","../src/AnimImage.js","../src/SlideshowLightbox.js","../src/index.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react'\r\nimport { motion, AnimatePresence, AnimateSharedLayout } from 'framer-motion'\r\nimport {  XLg,  } from 'react-bootstrap-icons';\r\n\r\nconst themes = {\r\n  day: { background: 'white', iconColor: 'black' },\r\n  night: { background: '#151515', iconColor: 'silver' },\r\n  lightbox: { background: 'rgba(0, 0, 0, 0.4)', iconColor: 'silver' }\r\n}\r\n\r\nconst defaultTheme = 'lightbox'\r\n\r\nexport const VideoLightbox = (props) => {\r\n  const [isOverlayDisplayed, setIsOverlayDisplayed] = useState(false)\r\n  const [iconColor, setIconColor] = useState(\r\n    props.iconColor ? props.iconColor : themes[defaultTheme].iconColor\r\n  )\r\n\r\n  const [backgroundColor, setBackgroundColor] = React.useState(\r\n    props.backgroundColor ? props.backgroundColor : themes['lightbox']\r\n  )\r\n  const [state, setState] = React.useState()\r\n  const bodyRef = useRef(null)\r\n\r\n  React.useEffect(() => {\r\n    if (props.theme) {\r\n      if (themes[props.theme]) {\r\n        setBackgroundColor(themes[props.theme].background)\r\n        setIconColor(themes[props.theme].iconColor)\r\n      }\r\n    }\r\n  }, [state])\r\n\r\n  return (\r\n    <div className=\"lightboxjs\">\r\n      <AnimateSharedLayout type='crossfade'>\r\n        <AnimatePresence>\r\n          {isOverlayDisplayed !== false && (\r\n            <motion.div\r\n              initial={{ opacity: 0 }}\r\n              exit={{ opacity: 0 }}\r\n              animate={{ opacity: 1 }}\r\n              key='videoOverlay'\r\n              style={{\r\n                position: 'fixed',\r\n                top: 0,\r\n                left: 0,\r\n                backgroundColor: backgroundColor,\r\n                width: '100vw',\r\n                height: '100vh',\r\n                zIndex: 999999\r\n              }}\r\n              className={`slideshowAnimContainer`}\r\n              onClick={() => setIsOverlayDisplayed(false)}\r\n            >\r\n              <div className='lightboxContainer'>\r\n                <section\r\n                  className='iconsHeader imageModal'\r\n                  style={{ color: iconColor }}\r\n                >\r\n                  {/* <FontAwesomeIcon icon={isFullScreen ? \"compress\" : \"expand\"} onClick={() => {isFullScreen ? exitFullScreen() : fullScreen()}} /> */}\r\n                  <motion.div whileTap={{scale: 0.95}} className=\"closeIcon\">\r\n\r\n                    <XLg onClick={() => {setIsOverlayDisplayed(false) }} />\r\n                  </motion.div>\r\n\r\n                </section>\r\n\r\n                <motion.div\r\n                  className='slideshowInnerContainer imageModal'\r\n                  key={'image'}\r\n                  onAnimationComplete={() => {\r\n                    setIsAnimating(false)\r\n                  }}\r\n                  onAnimationStart={() => {\r\n                    setIsAnimating(true)\r\n                  }}\r\n                >\r\n                  <motion.video\r\n                    //   onClick={() => setIsOverlayDisplayed(props.image.title)}\r\n                    layoutId={'vidMotion-' + props.id}\r\n                    //  style={{ height: \"50vh\", width: \"50vw\"}}\r\n                    className={`cursor-pointer m-auto`}\r\n                    key={props.id}\r\n                    controls\r\n                  >\r\n                    <source src={props.videoSrc} type='video/mp4' />\r\n                  </motion.video>\r\n                </motion.div>\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n\r\n          {/* {isOverlayDisplayed === false && (  */}\r\n\r\n          <motion.video\r\n            //   src={props.image.src}\r\n            onClick={() => setIsOverlayDisplayed(props.id)}\r\n            layoutId={'vidMotion-' + props.id}\r\n            className={`cursor-pointer`}\r\n            key={props.id}\r\n            width={500}\r\n            controls={false}\r\n            poster={props.posterUrl}\r\n          >\r\n            <source src={props.videoSrc} type='video/mp4' />\r\n          </motion.video>\r\n\r\n          {/* )} */}\r\n        </AnimatePresence>\r\n      </AnimateSharedLayout>\r\n    </div>\r\n  )\r\n}\r\n","import { useState, useCallback, useEffect, useRef } from \"react\";\r\n\r\nexport const wrapNums = (minNum, maxNum, v) => {\r\n      let rangeSize = maxNum - minNum;\r\n      return ((((v - minNum) % rangeSize) + rangeSize) % rangeSize) + minNum;\r\n};\r\n\r\nexport const useInterval = (callback, timeDelay) => {\r\n      const savedCallbackRef = useRef();\r\n    \r\n      useEffect(() => {\r\n        savedCallbackRef.current = callback;\r\n      }, [callback]);\r\n    \r\n      useEffect(() => {\r\n        function tick() {\r\n          savedCallbackRef.current();\r\n        }\r\n        if (timeDelay !== null) {\r\n          // Set the interval\r\n          let intervalID = setInterval(tick, timeDelay);\r\n\r\n          // Remove the interval\r\n          return () => clearInterval(intervalID);\r\n        }\r\n      }, [timeDelay]);\r\n}\r\n\r\nexport const openFullScreen = (lightbox_elem) => {\r\n  if (lightbox_elem.requestFullscreen) {\r\n    lightbox_elem.requestFullscreen();\r\n  } \r\n\r\n  /* Safari */\r\n  else if (lightbox_elem.webkitRequestFullscreen) { \r\n    lightbox_elem.webkitRequestFullscreen();\r\n  } \r\n  \r\n  /* Internet Explorer */\r\n  else if (lightbox_elem.msRequestFullscreen) { \r\n    lightbox_elem.msRequestFullscreen();\r\n  }\r\n}\r\n\r\nexport const closeFullScreen = (document) => {\r\n  if (document.exitFullscreen) {\r\n    document.exitFullscreen();\r\n  } \r\n\r\n  /* Safari */\r\n  else if (document.webkitExitFullscreen) { \r\n    document.webkitExitFullscreen();\r\n  } \r\n  \r\n  /* Internet Explorer */\r\n  else if (document.msExitFullscreen) { \r\n    document.msExitFullscreen();\r\n  }\r\n}\r\n\r\nexport const swipePower = (offset, velocity) => {\r\n    return Math.abs(offset) * velocity;\r\n};\r\n\r\nexport const isBrowser = () => typeof window !== \"undefined\"","import React , {useEffect, useState, useRef} from 'react'\r\nimport { motion, AnimatePresence, AnimateSharedLayout } from 'framer-motion';\r\nimport {useInterval, wrapNums, openFullScreen, closeFullScreen} from \"./utility\";\r\nimport { MapInteractionCSS } from '@silvia-odwyer/react-map-interaction-fork';\r\nimport {cover, contain} from 'intrinsic-scale';\r\nimport {  ZoomIn, ZoomOut,Fullscreen, Search, XLg, GridFill} from 'react-bootstrap-icons';\r\nimport { isBrowser } from './utility'; \r\nimport {Portal} from \"react-portal\";\r\nimport { TransformWrapper, TransformComponent } from 'react-zoom-pan-pinch'\r\n\r\nconst themes = {\"day\": {background: \"white\", iconColor: \"black\"}, \"night\": {background: \"#151515\", iconColor: \"silver\"}, \r\n                \"lightbox\": {background: \"rgba(0, 0, 0, 0.4)\", iconColor: \"silver\"}};\r\n                \r\nconst defaultTheme = \"lightbox\";\r\nconst maxScale = 2.6;\r\nconst minScale = 1;\r\nconst defaultMapInteractionValue = {scale: 1, translation: { x: 0, y: 0 }};\r\n\r\nexport const AnimImage = ({children, ...props}) => {\r\n  const [isOverlayDisplayed, setIsOverlayDisplayed] = useState(false);\r\n  const [isZoomed, setIsZoomed] = useState(false);\r\n  const [zoomImg, setZoomImg] = useState(0);\r\n  const [isFullScreenImage, setIsFullScreenImage] = useState(props.fullScreenImage ? props.fullScreenImage : false);\r\n  const [roundedImage, setRoundedImage] = useState(props.roundedImage ? props.roundedImage : true);\r\n\r\n  const [imgContainHeight, setImgContainHeight] = useState(500);\r\n  const [imgContainWidth, setImgContainWidth] = useState(426);\r\n  const [imgLayoutID, setImgLayoutID] = useState(props.imgAnimation ? props.imgAnimation : \"imgMotion-\");\r\n  const [backgroundColor, setBackgroundColor] = useState(props.backgroundColor ? props.backgroundColor : themes[defaultTheme].background);\r\n  const [iconColor, setIconColor] = useState(props.iconColor ? props.iconColor : themes[defaultTheme].iconColor);\r\n  const [state, setState] = React.useState();\r\n  const [panImage, setPanImage] = useState(true);\r\n  const [mapInteractionValue, setMapInteractionValue] = useState(defaultMapInteractionValue);\r\n  const [isAnimating, setIsAnimating] = useState(false);\r\n  const imgElem = useRef(null);\r\n\r\n  const changeCursor = (cursor_name) => {\r\n    let container = imgElem.current.parentElement.parentElement;\r\n    container.style.cursor = `${cursor_name}`;\r\n  }\r\n\r\n  const checkModalClick = (e) => {\r\n\r\n    const modals = document.getElementsByClassName('imageModal');\r\n    let arr_modals = Array.from(modals);\r\n\r\n    for (let i =0; i < arr_modals.length; i++) {\r\n      let elem = arr_modals[i];\r\n      let clickInside = elem.contains(e.target)\r\n    \r\n      if (clickInside) {\r\n         return;\r\n      }\r\n    }\r\n    \r\n    setIsOverlayDisplayed(false);\r\n\r\n  }\r\n\r\n  // get image dimensions required to contain image in \r\n  // lightbox container\r\n  function getImageDimensions(url){   \r\n\r\n  }\r\n\r\n  const loadImage = (imageUrl) => {\r\n    const img = new Image();\r\n    img.src = imageUrl;\r\n  \r\n    img.onload = () => {\r\n      let { width, height, x, y } = contain(screen.width * 0.92, screen.height * 0.8, img.naturalWidth, img.naturalHeight);\r\n      setImgContainHeight(height);\r\n      setImgContainWidth(width);\r\n    };\r\n    img.onerror = (err) => {\r\n      console.error(err);\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n\r\n    loadImage(props.image.src);\r\n\r\n      if (props.theme) {\r\n        if (themes[props.theme]) {\r\n          setBackgroundColor(themes[props.theme].background);\r\n          setIconColor(themes[props.theme].iconColor);\r\n\r\n        }\r\n      }\r\n\r\n      let reducedMotionMediaQuery = checkAndInitReducedMotion();\r\n\r\n      return () => {\r\n        reducedMotionMediaQuery.removeEventListener(\"change\", reducedMotionMediaQuery)\r\n      };\r\n\r\n\r\n  }, [state]);\r\n\r\n \r\n  const initSmoothZoom = () => {\r\n    let container = imgElem.current.parentElement;\r\n    container.style.transition = \"transform 0.2s\";\r\n  }\r\n\r\n  const removeSmoothZoom = () => {\r\n    let container = imgElem.current.parentElement;\r\n    container.style.transition = \"\";\r\n  }\r\n\r\n  const smoothZoomTimeout = () => {\r\n    setTimeout(() => {\r\n      initSmoothZoom();\r\n    }, 300)\r\n  }\r\n\r\n    \r\n  const zoomIn = () => {\r\n    changeCursor(\"zoom-out\");\r\n    setIsZoomed(true);\r\n    setZoomImg(zoomImg + 1);\r\n  }\r\n  \r\n  const zoomOut = () => {\r\n    changeCursor(\"zoom-in\");\r\n    setIsZoomed(false);\r\n    setZoomImg(zoomImg - 1);\r\n  }\r\n\r\n  const closeLightbox = () => {\r\n    resetMapInteractionValue();\r\n\r\n    setIsOverlayDisplayed(false);\r\n  }\r\n\r\n  const resetMapInteractionValue = () => {\r\n    setMapInteractionValue({scale: 1, translation: { x: 0, y: 0 }});\r\n  }\r\n\r\n  const reinitZoomSettings = (value) => {\r\n\r\n    // if user zoomed in\r\n    if (value.scale > mapInteractionValue.scale) {\r\n      setIsZoomed(true)  \r\n      initSmoothZoom();\r\n    }\r\n    // if user zoomed out\r\n    else if (value.scale < mapInteractionValue.scale) {\r\n      setIsZoomed(false);\r\n      initSmoothZoom();\r\n    }\r\n\r\n    // user panned image, did not zoom\r\n    else {\r\n      removeSmoothZoom();\r\n    }\r\n  }\r\n\r\n  const setReducedMotion = (mediaQuery) => {\r\n    if (mediaQuery.matches) {\r\n      setImgLayoutID(null);\r\n    }\r\n  }                                            \r\n\r\n  // Check if the user has a preference for reduced motion\r\n  // If so, the image animation transitions between slides in the slideshow will be adjusted \r\n  // to account for this\r\n  const checkAndInitReducedMotion = () => {\r\n    let reducedMotionMediaQuery;\r\n    if (isBrowser) {\r\n      reducedMotionMediaQuery = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\r\n\r\n      if (!reducedMotionMediaQuery || reducedMotionMediaQuery.matches) {\r\n        setImgLayoutID(null)\r\n      }\r\n  \r\n      reducedMotionMediaQuery.addEventListener(\"change\", setReducedMotion(reducedMotionMediaQuery));\r\n    }\r\n\r\n    return reducedMotionMediaQuery;\r\n  }\r\n\r\n  const mapInteractionChange = (value) => {\r\n    setPanImage(false); \r\n\r\n    reinitZoomSettings(value)\r\n\r\n    setMapInteractionValue(value)\r\n\r\n    if (value.scale == defaultMapInteractionValue.scale) {\r\n      setPanImage(true);\r\n      resetMapInteractionValue();\r\n\r\n      smoothZoomTimeout();\r\n    }\r\n\r\n    else if (value.scale > defaultMapInteractionValue.scale && !isAnimating) {\r\n      changeCursor(\"all-scroll\")\r\n    }\r\n    \r\n  }\r\n    return (\r\n      <div className=\"lightboxjs\">\r\n        <AnimatePresence>\r\n\r\n          <motion.img\r\n            {...props}\r\n            src={props.image.src}\r\n            onClick={() => setIsOverlayDisplayed(props.image.title)}\r\n            // layoutId={\"imgMotion-\" + props.image.title}\r\n            whileTap={{scale: 0.97}}\r\n            style={props.style}\r\n            className=\"cursor-pointer\"\r\n            key={props.image.title}\r\n          />\r\n\r\n        <Portal>\r\n          <AnimatePresence>\r\n\r\n            {isOverlayDisplayed !== false && (\r\n\r\n              <motion.div\r\n                initial={{ opacity: 0 }}\r\n                exit={{ opacity: 0 } }\r\n                animate={{ opacity: 1,}}\r\n                key=\"imgOverlay\"\r\n                style={{\r\n                  position: \"fixed\",\r\n                  top: 0,\r\n                  left: 0,\r\n                  backgroundColor: backgroundColor, \r\n                  width: \"100vw\", \r\n                  height: \"100vh\",\r\n                  zIndex: 999999,\r\n                }}\r\n                className = {`flex h-screen slideshowAnimContainer`}\r\n                onClick={(event) => checkModalClick(event)}\r\n              >\r\n                <motion.div className=\"lightboxContainer\">\r\n                  <section className=\"iconsHeader imageModal\" style={{color: iconColor}}>\r\n\r\n                  <motion.div whileTap={{scale: 0.95}}>\r\n                            <ZoomIn onClick={() => zoomIn()} />\r\n                  </motion.div>\r\n\r\n                    <motion.div whileTap={{scale: 0.95}}>\r\n                            <ZoomOut onClick={() => zoomOut()} />\r\n                          </motion.div>\r\n                    {/* <FontAwesomeIcon icon={isFullScreen ? \"compress\" : \"expand\"} onClick={() => {isFullScreen ? exitFullScreen() : fullScreen()}} /> */}\r\n\r\n                    <motion.div whileTap={{scale: 0.95}} className=\"closeIcon\">\r\n\r\n                      <XLg onClick={() => {closeLightbox() }} />\r\n                    </motion.div>\r\n                  </section>\r\n\r\n                  <motion.div className=\"imageInnerContainer imageModal\">\r\n\r\n                     <MapInteractionCSS maxScale={maxScale} minScale={minScale} disablePan={panImage} value={mapInteractionValue}\r\n                    onChange={(value) => {mapInteractionChange(value)}} zoomIn={zoomImg} > \r\n                        <motion.img\r\n                          src={props.image.src}\r\n                          key={\"image\"}\r\n                          // layoutId={\"imgMotion-\" + isOverlayDisplayed}\r\n                          // initial={{ scale: 0.7 }}\r\n                          // exit={{ scale: 0.7, opacity: 0 } }\r\n                          // animate={{scale: 1}}\r\n                          onAnimationComplete={() => {setIsAnimating(false)}}\r\n                          onAnimationStart={() => {setIsAnimating(true)}}\r\n                          className=\"m-auto\"\r\n                          style={{width: imgContainWidth, height: imgContainHeight}}\r\n                          ref={imgElem}\r\n                          onClick={(e) => {\r\n                            if (!e.defaultPrevented) {\r\n                              if (!isZoomed && !isAnimating) {\r\n                                zoomIn()\r\n                              }\r\n                              else {\r\n                              zoomOut();\r\n                              }\r\n                            }\r\n                          }}\r\n                        />\r\n                    </MapInteractionCSS> \r\n\r\n                  </motion.div>\r\n\r\n                </motion.div>\r\n\r\n              </motion.div>\r\n\r\n            )}\r\n            </AnimatePresence>\r\n\r\n          </Portal>\r\n\r\n        </AnimatePresence>\r\n\r\n      </div>\r\n      \r\n  );\r\n\r\n}","import * as React from 'react'\r\nimport { useState, useCallback, useEffect, useRef } from 'react'\r\nimport { motion, AnimatePresence, AnimateSharedLayout } from 'framer-motion'\r\nimport {\r\n  useInterval,\r\n  wrapNums,\r\n  openFullScreen,\r\n  closeFullScreen,\r\n  swipePower\r\n} from './utility'\r\nimport { MapInteractionCSS } from '@silvia-odwyer/react-map-interaction-fork'\r\nimport {\r\n  ZoomIn,\r\n  ZoomOut,\r\n  Fullscreen,\r\n  PlayCircleFill,\r\n  Search,\r\n  PauseCircleFill,\r\n  FullscreenExit,\r\n  XLg,\r\n  GridFill\r\n} from 'react-bootstrap-icons'\r\nimport ScrollContainer from 'react-indiana-drag-scroll'\r\nimport Magnifier from 'react-magnifier'\r\nimport { cover, contain } from 'intrinsic-scale'\r\nimport { isBrowser } from './utility'\r\nimport { Portal } from 'react-portal'\r\nimport { TransformWrapper, TransformComponent } from 'react-zoom-pan-pinch'\r\nimport ReactSwipe from 'react-swipe'\r\n\r\nconst variants = {\r\n  imgDrag: {\r\n    enterImg: (direction) => {\r\n      return {\r\n        x: direction > 0 ? 1000 : -1000,\r\n        opacity: 0\r\n      }\r\n    },\r\n    centerImg: {\r\n      zIndex: 1,\r\n      x: 0,\r\n      opacity: 1\r\n    },\r\n    exitImg: (direction) => {\r\n      return {\r\n        zIndex: 0,\r\n        x: direction < 0 ? 1000 : -1000,\r\n        opacity: 0\r\n      }\r\n    }\r\n  },\r\n  fade: {\r\n    enterImg: (direction) => {\r\n      return {\r\n        opacity: 0\r\n      }\r\n    },\r\n    centerImg: {\r\n      zIndex: 1,\r\n      opacity: 1\r\n    },\r\n    exitImg: (direction) => {\r\n      return {\r\n        zIndex: 0,\r\n        opacity: 0\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nlet thumbnailVariants = {\r\n  visible: { opacity: 1, y: 0 },\r\n  hidden: { opacity: 0, y: 100 }\r\n}\r\n\r\nconst defaultMapInteractionValue = { scale: 1, translation: { x: 0, y: 0 } }\r\nconst themes = {\r\n  day: {\r\n    background: 'white',\r\n    iconColor: 'black',\r\n    thumbnailBorder: 'solid transparent 2px'\r\n  },\r\n  night: {\r\n    background: '#151515',\r\n    iconColor: 'silver',\r\n    thumbnailBorder: 'solid rgb(138, 138, 138) 2px'\r\n  },\r\n  lightbox: {\r\n    background: 'rgba(12, 12, 12, 0.93)',\r\n    iconColor: 'silver',\r\n    thumbnailBorder: 'solid rgb(138, 138, 138) 2px'\r\n  }\r\n}\r\nconst activeThumbnailBorder = 'solid rgba(107, 133, 206, 0.6) 2px'\r\nconst arrowStyles = {\r\n  light: { background: 'white', color: 'black' },\r\n  dark: { background: '#151515', color: 'silver' }\r\n}\r\n\r\nconst swipeConfidenceThreshold = 10000\r\nconst opacityDuration = 0.2\r\nconst maxScale = 2.6\r\nconst minScale = 1\r\nconst imgSwipeDirection = 'x'\r\nconst defaultTheme = 'night'\r\nconst mobileWidth = 768\r\nconst animTransitionDefault = {\r\n  x: { type: 'spring', stiffness: 300, damping: 30 },\r\n  opacity: { duration: opacityDuration }\r\n}\r\nconst slideshowAnimTransition = {\r\n  opacity: { duration: opacityDuration }\r\n}\r\n\r\nexport const SlideshowLightbox = (props) => {\r\n\r\n  const [[imgSlideIndex, direction], setImgSlideIndex] = useState([0, 0])\r\n  const [showModal, setShowModal] = useState(false)\r\n  const [isSlideshowPlaying, setIsSlideshowPlaying] = useState(false);\r\n  // const [reactSwipeEl, setReactSwipeEl] = useState(false);\r\n\r\n  const [images, setImages] = useState(\r\n    props.children ? props.children.map((obj) => obj.props) : []\r\n  )\r\n  const imageIndex = wrapNums(0, images.length, imgSlideIndex);\r\n  const [reactSwipeOptions, setReactSwipeOptions] = useState(  { continuous: true, startSlide: 0 }    )\r\n\r\n  const [slideshowInterval, setSlideshowInterval] = useState(\r\n    props.slideshowInterval ? props.slideshowInterval : 1100\r\n  )\r\n  const [roundedImages, setRoundedImages] = useState(\r\n    props.roundedImages ? props.roundedImages : true\r\n  )\r\n  const [showControls, setShowControls] = useState(\r\n    props.showControls ? props.showControls : true\r\n  )\r\n  const [lightboxIdentifier, setLightboxIdentifier] = useState(\r\n    props.lightboxIdentifier ? props.lightboxIdentifier : false\r\n  )\r\n  const [imageFullScreen, setImageFullScreen] = useState(\r\n    props.fullScreen ? props.fullScreen : false\r\n  )\r\n  const [licenseKey, setLicenseKey] = useState(\r\n    props.licenseKey ? props.licenseKey : ''\r\n  )\r\n  const [lockAxisY, setLockAxisY] = useState(false)\r\n\r\n  const [isZoomed, setIsZoomed] = useState(false)\r\n  const [animTransition, setAnimTransition] = useState(animTransitionDefault)\r\n  const [panImage, setPanImage] = useState(true)\r\n  const [zoomImg, setZoomImg] = useState(0)\r\n  const [width, setWidth] = useState(0)\r\n  const [mapInteractionValue, setMapInteractionValue] = useState(\r\n    defaultMapInteractionValue\r\n  )\r\n  const [imgSwipeMotion, setImgSwipeMotion] = useState(imgSwipeDirection)\r\n  const [isAnimating, setIsAnimating] = useState(false)\r\n  const [isBrowserFullScreen, setIsBrowserFullScreen] = useState(false)\r\n  const [enableMagnifyingGlass, setMagnifyingGlass] = useState(false)\r\n  const [imagesLoaded, setImagesLoaded] = useState(false)\r\n  const [refIndex, setRefIndex] = useState(0)\r\n\r\n  const [imgContainHeight, setImgContainHeight] = useState(500)\r\n  const [imgContainWidth, setImgContainWidth] = useState(426)\r\n  const [isInit, setIsInit] = useState(false)\r\n  const [imgElems, setImgElems] = useState(false)\r\n\r\n  const [usesDataAttr, setUsesDataAttr] = useState(false)\r\n\r\n  // Thumbnails slider\r\n  const [mouseDown, setMouseDown] = useState(false)\r\n  const [startX, setStartX] = useState(false)\r\n  const [scrollLeft, setScrollLeft] = useState(false)\r\n\r\n  // Refs\r\n  // const imgElemRef = useRef(null);\r\n  // const [imgElem, setImgElem] = useState(null);\r\n  const zoomRef = useRef(null)\r\n  const [zoomBtnRef, setZoomBtnRef] = useState(null)\r\n  const [zoomRefs, setZoomRefs] = useState([])\r\n\r\n  const [zoomBtnRef2, setZoomBtnRef2] = useState(null)\r\n\r\n  // const reactSwipeEl = useRef(null)\r\n  // const [reactSwipeElRef, setReactSwipeElRef] = useState(null)\r\n\r\n  const initZoomRef = (ref) => {\r\n    if (ref) setZoomBtnRef(ref)\r\n    else setZoomBtnRef(null)\r\n  }\r\n\r\n  const initZoomRef2 = (ref) => {\r\n    let refs = zoomRefs\r\n    if (ref) {\r\n      zoomRefs.push(ref)\r\n    }\r\n    // else setZoomBtnRef2(null)\r\n  }\r\n\r\n  \r\n\r\n  // Styling/theming\r\n  const [backgroundColor, setBackgroundColor] = useState(\r\n    props.backgroundColor\r\n      ? props.backgroundColor\r\n      : themes[defaultTheme].background\r\n  )\r\n  const [iconColor, setIconColor] = useState(\r\n    props.iconColor ? props.iconColor : themes[defaultTheme].iconColor\r\n  )\r\n  const [thumbnailBorder, setThumbnailBorder] = useState(\r\n    props.thumbnailBorder\r\n      ? props.thumbnailBorder\r\n      : themes[defaultTheme].thumbnailBorder\r\n  )\r\n\r\n  const [showThumbnails, setShowThumbnails] = useState(\r\n    props.showThumbnails ? props.showThumbnails : false\r\n  )\r\n  const [animatedThumbnails, setAnimatedThumbnails] = useState(\r\n    props.animateThumbnails ? props.animateThumbnails : true\r\n  )\r\n  const [imgAnimation, setImgAnimation] = useState(\r\n    props.imgAnimation ? props.imgAnimation : 'imgDrag'\r\n  )\r\n  // const [slideshowVariants, setSlideshowVariants] = useState(variants[imgAnimation] ? variants[imgAnimation]  : variants[\"imgDrag\"]);\r\n  const [arrowStyle, setArrowStyle] = useState(\r\n    props.arrowStyle ? props.arrowStyle : 'dark'\r\n  )\r\n\r\n  const isMobile = width <= mobileWidth\r\n\r\n  const keyPressHandler = (event) => {\r\n    let key = event.key\r\n\r\n    if (key == 'ArrowLeft') {\r\n      updateCurrentSlide(-1)\r\n    } else if (key == 'ArrowRight') {\r\n      updateCurrentSlide(1)\r\n    } else if (key == 'Escape' && !isBrowserFullScreen) {\r\n      closeModal()\r\n    }\r\n  }\r\n\r\n  function handleWindowResize() {\r\n    setWidth(window.innerWidth)\r\n  }\r\n\r\n  const checkModalClick = (e) => {\r\n    const modals = document.getElementsByClassName('imageModal')\r\n    let arr_modals = Array.from(modals)\r\n\r\n    for (let i = 0; i < arr_modals.length; i++) {\r\n      let elem = arr_modals[i]\r\n      let clickInside = elem.contains(e.target)\r\n\r\n      if (clickInside) {\r\n        return\r\n      }\r\n    }\r\n\r\n    setShowModal(false)\r\n  }\r\n\r\n  const fullScreen = () => {\r\n    let lightbox = document.getElementById('slideshowAnim')\r\n    openFullScreen(lightbox)\r\n    setIsBrowserFullScreen(true)\r\n    initFullScreenChangeEventListeners()\r\n  }\r\n\r\n  const exitFullScreen = () => {\r\n    if (isBrowserFullScreen) {\r\n      closeFullScreen(document)\r\n      setIsBrowserFullScreen(false)\r\n      removeFullScreenChangeEventListeners()\r\n    }\r\n  }\r\n\r\n  const updateCurrentSlide = (newDirection) => {\r\n    resetSlideAnim()\r\n    setMagnifyingGlass(false)\r\n    resetMapInteraction()\r\n    setImgSlideIndex([imgSlideIndex + newDirection, newDirection])\r\n    if (isMobile) {\r\n      setZoomBtnRef(zoomRef)\r\n    }\r\n  }\r\n\r\n  const updateImageSlideshow = (newDirection) => {\r\n    resetMapInteraction()\r\n    setImgSlideIndex([imgSlideIndex + newDirection, newDirection])\r\n  }\r\n\r\n  const resetSlideAnim = () => {\r\n    setAnimTransition(animTransitionDefault)\r\n  }\r\n\r\n  const resetMapInteraction = () => {\r\n    setPanImage(true)\r\n    setMapInteractionValue({ scale: 1, translation: { x: 0, y: 0 } })\r\n    setIsZoomed(false)\r\n  }\r\n\r\n  const setCurrentSlide = (newIndex) => {\r\n    let newDirection\r\n    if (newIndex > imgSlideIndex) {\r\n      newDirection = 1\r\n    } else {\r\n      newDirection = -1\r\n    }\r\n\r\n    setAnimTransition(slideshowAnimTransition)\r\n    resetMapInteraction()\r\n    setImgSlideIndex([newIndex, newDirection])\r\n    reactSwipeEl.slide(newIndex, 500)\r\n  }\r\n\r\n  const closeModal = () => {\r\n    if (isBrowserFullScreen) {\r\n      exitFullScreen()\r\n    }\r\n\r\n    // ensure slideshow is paused\r\n    if (isSlideshowPlaying) {\r\n      setIsSlideshowPlaying(false)\r\n    }\r\n\r\n    resetMapInteraction()\r\n    setIsZoomed(false)\r\n    setShowModal(false)\r\n  }\r\n\r\n  const openModal = (num) => {\r\n    setImgSlideIndex([num, 1])\r\n    setShowModal(true);\r\n    \r\n  }\r\n\r\n  const openModalAndSetSlide = (num) => {\r\n    reactSwipeEl.slide(num, 0)\r\n    \r\n    setImgSlideIndex([num, 1])\r\n    setShowModal(true);\r\n\r\n\r\n  }\r\n\r\n  const playSlideshow = () => {\r\n    setMagnifyingGlass(false)\r\n    setAnimTransition(slideshowAnimTransition)\r\n    updateImageSlideshow(1)\r\n    setIsSlideshowPlaying(true)\r\n  }\r\n\r\n  const stopSlideshow = () => {\r\n    setAnimTransition(animTransitionDefault)\r\n    setIsSlideshowPlaying(false)\r\n  }\r\n\r\n  const zoomIntoImg = () => {\r\n    if (!isMobile) {\r\n      // changeCursor('all-scroll')\r\n      setIsZoomed(true)\r\n    }\r\n    if (zoomBtnRef) {\r\n      zoomBtnRef.zoomIn()\r\n    }\r\n  }\r\n\r\n  const zoomOutFromImg = () => {\r\n    if (!isMobile) {\r\n      changeCursor('zoom-in')\r\n      setIsZoomed(false)\r\n      setZoomImg(zoomImg - 1)\r\n\r\n      if (zoomImg == 1) {\r\n        resetMapInteraction()\r\n      }\r\n    }\r\n\r\n    if (zoomBtnRef) {\r\n      zoomBtnRef.zoomOut()\r\n    }\r\n  }\r\n\r\n  const checkAndUpdateSlide = (offset, velocity) => {\r\n    const swipe = swipePower(offset.x, velocity.x)\r\n\r\n    if (swipe < -swipeConfidenceThreshold || swipe > swipeConfidenceThreshold) {\r\n      setMapInteractionValue({ scale: 1, translation: { x: 0, y: 0 } })\r\n      setPanImage(true)\r\n      if (swipe < -swipeConfidenceThreshold) {\r\n        updateCurrentSlide(1)\r\n      } else if (swipe > swipeConfidenceThreshold) {\r\n        updateCurrentSlide(-1)\r\n      }\r\n    } else {\r\n      removeSmoothZoom()\r\n    }\r\n  }\r\n\r\n  const reinitZoomSettings = (value) => {\r\n    // if user zoomed in\r\n    if (value.scale > mapInteractionValue.scale) {\r\n      setIsZoomed(true)\r\n      initSmoothZoom()\r\n    }\r\n    // if user zoomed out\r\n    else if (value.scale < mapInteractionValue.scale) {\r\n      setIsZoomed(false)\r\n      initSmoothZoom()\r\n    }\r\n\r\n    // user panned image, did not zoom\r\n    else {\r\n      removeSmoothZoom()\r\n    }\r\n  }\r\n\r\n  const mapInteractionChange = (value) => {\r\n    setPanImage(false)\r\n    updateImgSwipeMotion(false)\r\n\r\n    reinitZoomSettings(value)\r\n\r\n    setMapInteractionValue(value)\r\n\r\n    if (value.scale == defaultMapInteractionValue.scale) {\r\n      setPanImage(true)\r\n      setMapInteractionValue({ scale: 1, translation: { x: 0, y: 0 } })\r\n\r\n      updateImgSwipeMotion(imgSwipeDirection)\r\n      smoothZoomTimeout()\r\n    } else if (value.scale > defaultMapInteractionValue.scale && !isAnimating) {\r\n      changeCursor('all-scroll')\r\n    }\r\n  }\r\n\r\n  const updateImgSwipeMotion = (swipeDirection) => {\r\n    setImgSwipeMotion(swipeDirection)\r\n  }\r\n\r\n  const initStyling = () => {\r\n    if (props.theme) {\r\n      if (themes[props.theme]) {\r\n        setBackgroundColor(themes[props.theme].background)\r\n        setIconColor(themes[props.theme].iconColor)\r\n        setThumbnailBorder(themes[props.theme].thumbnailBorder)\r\n      }\r\n    }\r\n\r\n    if (props.fullScreen) {\r\n      if (props.fullScreen == true) {\r\n        setImgAnimation('fade')\r\n        setRoundedImages(false)\r\n      }\r\n    }\r\n  }\r\n\r\n  const paneNodes = Array.apply(null, Array(images.length)).map((_, index) => {\r\n    return (\r\n      <div key={index}>\r\n        {enableMagnifyingGlass == true ? (\r\n          <Magnifier\r\n            src={images[index].src}\r\n            className='imageModal mx-auto mt-0 magnifyWrapper'\r\n            height={imgContainHeight}\r\n            width={imgContainWidth}\r\n            mgShowOverflow={false}\r\n            style={{\r\n              width: imgContainWidth,\r\n              height: imgContainHeight\r\n            }}\r\n          />\r\n        ) : 1 == 1 ? (\r\n          <div>\r\n            <TransformWrapper\r\n              ref={initZoomRef2}\r\n              onWheel={{ wheelEvent }}\r\n              onZoom={zoomEvent}\r\n              centerZoomedOut={true}\r\n              initialScale={1}\r\n            >\r\n              <TransformComponent\r\n                wrapperStyle={{ marginLeft: 'auto', marginRight: 'auto' }}\r\n                contentStyle={\r\n                  fullScreen\r\n                    ? {\r\n                        width: '100vw',\r\n                        height: '100vh',\r\n                        marginLeft: 'auto',\r\n                        marginRight: 'auto'\r\n                      }\r\n                    : {\r\n                        width: '100vw',\r\n                        height: '100vh',\r\n                        marginLeft: 'auto',\r\n                        marginRight: 'auto'\r\n                      }\r\n                }\r\n                key={index}\r\n              >\r\n                <img\r\n                  className={`mx-auto ${\r\n                    imageFullScreen ? '' : 'object-contain'\r\n                  } imageModal ${roundedImages ? 'rounded-lg' : ''}`}\r\n                  src={images[index].src}\r\n                  id='img'\r\n                />\r\n              </TransformComponent>\r\n            </TransformWrapper>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    )\r\n  })\r\n\r\n  const initMagnifyingGlass = () => {\r\n    if (!enableMagnifyingGlass) {\r\n      initImageDimensions()\r\n    } else {\r\n      setImgAnimation('imgDrag')\r\n    }\r\n    setMagnifyingGlass(!enableMagnifyingGlass)\r\n  }\r\n\r\n  const initImageDimensions = () => {\r\n    console.log('Init img dimensions ')\r\n    let img = document.getElementById('img')\r\n    let imageContainerH, imageContainerW\r\n    if (isMobile) {\r\n      imageContainerW = 0.92\r\n\r\n      // horizontal image\r\n      if (img.naturalWidth > img.naturalHeight) {\r\n        imageContainerH = 0.65\r\n      }\r\n      //vertical image\r\n      else {\r\n        imageContainerH = 0.57\r\n      }\r\n\r\n      // remove dragging motion\r\n    } else {\r\n      imageContainerW = 0.92\r\n      imageContainerH = 0.71\r\n    }\r\n\r\n    let { width, height, x, y } = contain(\r\n      screen.width * imageContainerW,\r\n      screen.height * imageContainerH,\r\n      img.naturalWidth,\r\n      img.naturalHeight\r\n    )\r\n\r\n    console.log('Width ', width)\r\n    console.log('height ', height)\r\n    setImgContainHeight(height)\r\n    setImgContainWidth(width)\r\n  }\r\n\r\n  const changeCursor = (cursor_name) => {\r\n    if (!enableMagnifyingGlass) {\r\n      let imgElem = document.getElementById('img')\r\n      let container = imgElem.parentElement.parentElement\r\n      container.style.cursor = `${cursor_name}`\r\n    }\r\n  }\r\n\r\n  const removeDragEffect = (ref, e) => {\r\n    console.log('call remove effect')\r\n    setImgAnimation('')\r\n  }\r\n\r\n  const zoomEvent = (ref, e) => {\r\n    console.log('ZOOM EVENT ', ref)\r\n\r\n    if (ref.state.scale == 1) {\r\n      setImgAnimation('imgDrag')\r\n      setImgSwipeMotion(imgSwipeDirection)\r\n      console.log('reinit drag anim')\r\n    } else {\r\n      // setImgAnimation(\"fade\");\r\n    }\r\n  }\r\n\r\n  const wheelEvent = (ref, e) => {\r\n    console.log('WHEEL EVENT ', ref)\r\n    setImgAnimation('fade')\r\n\r\n    setLockAxisY(false)\r\n    // if (ref.state.scale == 1) {\r\n    //   setImgAnimation(\"imgDrag\");\r\n    //   setImgSwipeMotion(imgSwipeDirection)\r\n    //   console.log(\"reinit drag anim\")\r\n    // }\r\n  }\r\n\r\n  const initSmoothZoom = () => {\r\n    if (!enableMagnifyingGlass) {\r\n      let imgElem = document.getElementById('img')\r\n\r\n      let container = imgElem.parentElement\r\n      container.style.transition = 'transform 0.2s'\r\n    }\r\n  }\r\n\r\n  const removeSmoothZoom = () => {\r\n    if (!enableMagnifyingGlass) {\r\n      let imgElem = document.getElementById('img')\r\n\r\n      let container = imgElem.parentElement\r\n      container.style.transition = ''\r\n    }\r\n  }\r\n\r\n  const initFullScreenChangeEventListeners = () => {\r\n    document.addEventListener('fullscreenchange', exitFullScreen)\r\n    document.addEventListener('webkitfullscreenchange', exitFullScreen)\r\n    document.addEventListener('MSFullscreenChange', exitFullScreen)\r\n    document.addEventListener('mozfullscreenchange', exitFullScreen)\r\n  }\r\n\r\n  const removeFullScreenChangeEventListeners = () => {\r\n    document.removeEventListener('fullscreenchange', exitFullScreen)\r\n    document.removeEventListener('webkitfullscreenchange', exitFullScreen)\r\n    document.removeEventListener('MSFullscreenChange', exitFullScreen)\r\n    document.removeEventListener('mozfullscreenchange', exitFullScreen)\r\n  }\r\n\r\n  const initKeyboardEventListeners = () => {\r\n    document.addEventListener('keydown', keyPressHandler)\r\n\r\n    if (isBrowser) {\r\n      window.addEventListener('resize', handleWindowResize)\r\n    }\r\n  }\r\n\r\n  const removeKeyboardEventListeners = () => {\r\n    if (isBrowser) {\r\n      window.removeEventListener('resize', handleWindowResize)\r\n      document.removeEventListener('keydown', keyPressHandler)\r\n    }\r\n  }\r\n\r\n  const smoothZoomTimeout = () => {\r\n    setTimeout(() => {\r\n      initSmoothZoom()\r\n    }, 300)\r\n  }\r\n\r\n  const setReducedMotion = (mediaQuery) => {\r\n    if (mediaQuery.matches) {\r\n      setImgAnimation('fade')\r\n    }\r\n  }\r\n\r\n  // Check if the user has a preference for reduced motion\r\n  // If so, the image animation transitions between slides in the slideshow will be adjusted\r\n  // to account for this\r\n  const checkAndInitReducedMotion = () => {\r\n    let reducedMotionMediaQuery = ''\r\n\r\n    if (isBrowser) {\r\n      reducedMotionMediaQuery = window.matchMedia(\r\n        '(prefers-reduced-motion: reduce)'\r\n      )\r\n\r\n      if (!reducedMotionMediaQuery || reducedMotionMediaQuery.matches) {\r\n        setImgAnimation('fade')\r\n      }\r\n\r\n      reducedMotionMediaQuery.addEventListener(\r\n        'change',\r\n        setReducedMotion(reducedMotionMediaQuery)\r\n      )\r\n    }\r\n\r\n    return reducedMotionMediaQuery\r\n  }\r\n\r\n  const initProps = () => {\r\n    if (props.showControls != undefined) {\r\n      setShowControls(props.showControls)\r\n    }\r\n\r\n    if (isBrowser) {\r\n      setWidth(window.innerWidth)\r\n    }\r\n\r\n    if (window.innerWidth <= mobileWidth) {\r\n      setImgAnimation('fade')\r\n    }\r\n  }\r\n\r\n  // Slideshow feature; if isSlideshowPlaying set to true, then slideshow cycles through images\r\n  useInterval(\r\n    () => {\r\n      updateImageSlideshow(1)\r\n    },\r\n    isSlideshowPlaying ? slideshowInterval : null\r\n  )\r\n\r\n  useEffect(() => {\r\n    console.log(\"use effect\", props.fullScreen)\r\n    initProps()\r\n\r\n    // setImgElem(imgElemRef.current)\r\n    initKeyboardEventListeners()\r\n\r\n    let reducedMotionMediaQuery = checkAndInitReducedMotion()\r\n\r\n    if (!isInit) {\r\n      if (lightboxIdentifier) {\r\n        let img_gallery = document.querySelectorAll('[data-lightboxjs]')\r\n        let img_elements = []\r\n\r\n        let usesAttr = false\r\n        if (img_gallery.length > 0) {\r\n          for (let i = 0; i <= img_gallery.length - 1; i++) {\r\n            let img = img_gallery[i]\r\n\r\n            let attr_val = img.getAttribute('data-lightboxjs')\r\n            if (attr_val == lightboxIdentifier) {\r\n              img.addEventListener(\r\n                'click',\r\n                () => {\r\n                  let reactSwipeOptionConfig = reactSwipeOptions;\r\n                  reactSwipeOptionConfig.startSlide = i;\r\n                  setReactSwipeOptions(reactSwipeOptionConfig);\r\n                  openModal(i)\r\n                },\r\n                false\r\n              )\r\n              img.classList.add('cursor-pointer')\r\n              usesAttr = true\r\n              img_elements.push({ src: img.src, alt: img.alt })\r\n            }\r\n          }\r\n\r\n          if (usesAttr) {\r\n            setUsesDataAttr(true)\r\n          }\r\n\r\n          setImages(img_elements)\r\n        }\r\n      } else {\r\n        if (props.children) {\r\n          setImages(\r\n            props.children\r\n              .filter((elem) => elem.type == 'img')\r\n              .map((obj) => obj.props)\r\n          )\r\n        }\r\n      }\r\n\r\n      setIsInit(true)\r\n    };\r\n\r\n    initStyling()\r\n    return () => {\r\n      removeKeyboardEventListeners()\r\n      reducedMotionMediaQuery.removeEventListener(\r\n        'change',\r\n        reducedMotionMediaQuery\r\n      )\r\n    }\r\n  }, [keyPressHandler])\r\n\r\n\r\n  let rows = []\r\n  for (let index = 0; index < images.length; index++) {\r\n    // note: we are adding a key prop here to allow react to uniquely identify each\r\n    // element in this array. see: https://reactjs.org/docs/lists-and-keys.html\r\n    rows.push(\r\n      <div key={index}>\r\n        <div>\r\n          <h1>{index}</h1>\r\n          {enableMagnifyingGlass == true ? (\r\n            <Magnifier\r\n              src={images[index].src}\r\n              className='imageModal mt-0 magnifyWrapper'\r\n              height={imgContainHeight}\r\n              width={imgContainWidth}\r\n              mgShowOverflow={false}\r\n              style={{\r\n                width: imgContainWidth,\r\n                height: imgContainHeight\r\n              }}\r\n            />\r\n          ) : (\r\n            <div>\r\n              <TransformComponent\r\n                wrapperStyle={{ marginLeft: 'auto', marginRight: 'auto' }}\r\n                contentStyle={\r\n                  fullScreen\r\n                    ? {\r\n                        width: '100vw',\r\n                        height: '100vh',\r\n                        marginLeft: 'auto',\r\n                        marginRight: 'auto'\r\n                      }\r\n                    : {\r\n                        width: '30vw',\r\n                        height: '100vh',\r\n                        marginLeft: 'auto',\r\n                        marginRight: 'auto'\r\n                      }\r\n                }\r\n                key={index}\r\n              >\r\n                <img\r\n                  className={`mx-auto ${\r\n                    imageFullScreen ? '' : 'object-contain'\r\n                  } imageModal ${roundedImages ? 'rounded-lg' : ''}`}\r\n                  src={images[index].src}\r\n                  id='img'\r\n                />\r\n              </TransformComponent>\r\n            </div>\r\n          )}\r\n        </div>\r\n        ;\r\n      </div>\r\n    )\r\n  }\r\n  let reactSwipeEl;\r\n  return (\r\n    <div class={`${props.className} lightboxjs`}>\r\n      {lightboxIdentifier != false ? props.children : null}\r\n          {/* Gallery images */}\r\n          {lightboxIdentifier != false\r\n            ? null\r\n            : props.children\r\n                .filter((elem) => elem.type == 'img')\r\n                .map((elem, index) => (\r\n                  <img\r\n                    {...elem.props}\r\n                    class={elem.props.className + ' cursor-pointer'}\r\n                    onClick={() => {\r\n                      console.log(\"hi2\")\r\n                      let reactSwipeOptionConfig = reactSwipeOptions;\r\n                      reactSwipeOptionConfig.startSlide = index;\r\n                      setReactSwipeOptions(reactSwipeOptionConfig);\r\n                      openModal();\r\n                    }}\r\n                    key={index}\r\n                    whileTap={{ scale: 0.97 }}\r\n                  />\r\n                ))}\r\n      <AnimateSharedLayout type='crossfade'>\r\n        <AnimatePresence initial={false}>\r\n\r\n\r\n          {showModal !== false && (\r\n            <Portal>\r\n              <motion.div\r\n                className='slideshowAnimContainer'\r\n                key='slideshowAnimContainer'\r\n                id='slideshowAnim'\r\n                // onClick={(event) => {if (!isZoomed) checkModalClick(event)}}\r\n\r\n                initial={{ opacity: 0, scale: 0.98 }}\r\n                exit={{ opacity: 0, scale: 0.98 }}\r\n                animate={{ opacity: 1, scale: 1 }}\r\n                transition={{\r\n                  duration: 0.2\r\n                }}\r\n              >\r\n                {/* <TransformWrapper\r\n                          ref={initZoomRef}\r\n                          onWheel={{ wheelEvent }}\r\n                          onZoom={zoomEvent}\r\n                          centerZoomedOut={true}\r\n                          initialScale={1}\r\n\r\n                        >\r\n                          {({ zoomIn, zoomOut, resetTransform, ...rest }) => (\r\n          <React.Fragment> */}\r\n\r\n                <div\r\n                  className={`lightboxContainer`}\r\n                  style={{\r\n                    backgroundColor: backgroundColor\r\n                  }}\r\n                >\r\n                  <section\r\n                    className={\r\n                      'iconsHeader imageModal ' + arrowStyle + '_header_icon'\r\n                    }\r\n                    style={{ color: iconColor }}\r\n                  >\r\n                    {/* <button onClick={() => {console.log(\"img slide index prev \", imgSlideIndex); setCurrentSlide(imgSlideIndex + 1); console.log(\"img slide index \", imgSlideIndex); \r\n                        reactSwipeEl.next(); }}>N</button>\r\n      <button onClick={() => reactSwipeEl.prev()}>P</button> */}\r\n                    {showControls && (\r\n                      <div className='controls'>\r\n                        <motion.div whileTap={{ scale: 0.95 }}>\r\n                          <ZoomIn\r\n                            onClick={() => {\r\n                              console.log('zoom refs', zoomRefs[refIndex])\r\n                              zoomRefs[refIndex].zoomIn()\r\n                            }}\r\n                          />\r\n                        </motion.div>\r\n\r\n                        <motion.div whileTap={{ scale: 0.95 }}>\r\n                          <ZoomOut\r\n                            onClick={() => {\r\n                              console.log('zoom refs ', zoomRefs[refIndex])\r\n                              zoomRefs[refIndex].zoomOut()\r\n                            }}\r\n                          />\r\n                        </motion.div>\r\n\r\n                        {isBrowserFullScreen ? (\r\n                          <motion.div whileTap={{ scale: 0.95 }}>\r\n                            <FullscreenExit\r\n                              onClick={() => {\r\n                                isBrowserFullScreen\r\n                                  ? exitFullScreen()\r\n                                  : fullScreen()\r\n                              }}\r\n                            />\r\n                          </motion.div>\r\n                        ) : (\r\n                          <motion.div whileTap={{ scale: 0.95 }}>\r\n                            <Fullscreen\r\n                              onClick={() => {\r\n                                isBrowserFullScreen\r\n                                  ? exitFullScreen()\r\n                                  : fullScreen()\r\n                              }}\r\n                            />\r\n                          </motion.div>\r\n                        )}\r\n\r\n                        <motion.div whileTap={{ scale: 0.95 }}>\r\n                          <GridFill\r\n                            onClick={() => {\r\n                              setShowThumbnails(!showThumbnails)\r\n                            }}\r\n                          />\r\n                        </motion.div>\r\n\r\n                        {isMobile ? null : (\r\n                          <motion.div whileTap={{ scale: 0.95 }}>\r\n                            <Search onClick={() => initMagnifyingGlass()} />\r\n                          </motion.div>\r\n                        )}\r\n\r\n                        <motion.div\r\n                          whileTap={{ scale: 0.95 }}\r\n                          className='slideshowPlayBtn'\r\n                        >\r\n                          {isSlideshowPlaying ? (\r\n                            <PauseCircleFill\r\n                              onClick={() => {\r\n                                isSlideshowPlaying\r\n                                  ? stopSlideshow()\r\n                                  : playSlideshow()\r\n                              }}\r\n                            />\r\n                          ) : (\r\n                            <PlayCircleFill\r\n                              onClick={() => {\r\n                                isSlideshowPlaying\r\n                                  ? stopSlideshow()\r\n                                  : playSlideshow()\r\n                              }}\r\n                            />\r\n                          )}\r\n                        </motion.div>\r\n                      </div>\r\n                    )}\r\n\r\n                    <motion.div\r\n                      whileTap={{ scale: 0.95 }}\r\n                      className='closeIcon'\r\n                    >\r\n                      <XLg\r\n                        onClick={() => {\r\n                          closeModal()\r\n                        }}\r\n                      />\r\n                    </motion.div>\r\n                  </section>\r\n\r\n                  <div\r\n                    className={'next1 ' + arrowStyle + '_icon imageModal'}\r\n                    onClick={() => {\r\n                      setRefIndex(refIndex + 1);\r\n                      reactSwipeEl.next();\r\n                      setImgSlideIndex([imgSlideIndex + 1 , 1])\r\n\r\n                    }}\r\n                  >\r\n                    <span>&#10095;</span>\r\n                  </div>\r\n                  <div\r\n                    className={'prev1 ' + arrowStyle + '_icon imageModal'}\r\n                    onClick={() => {\r\n                      setRefIndex(refIndex - 1)\r\n                      reactSwipeEl.prev()\r\n                    }}\r\n                  >\r\n                    <span>&#10094;</span>\r\n                  </div>\r\n\r\n                  <AnimatePresence initial={false} custom={direction}>\r\n                    <ReactSwipe\r\n                      className={`slideshowInnerContainer  ${\r\n                        showThumbnails\r\n                          ? 'slideshowInnerContainerThumbnails'\r\n                          : ''\r\n                      } `}\r\n                      swipeOptions={reactSwipeOptions}\r\n                      ref={el => (reactSwipeEl = el)}\r\n                      childCount={images.length}\r\n                    >\r\n                      {paneNodes}\r\n                    </ReactSwipe>\r\n                  </AnimatePresence>\r\n\r\n                  <div\r\n                    className='thumbnailsOuterContainer imageModal'\r\n                    style={imagesLoaded ? {} : { display: 'displayHidden' }}\r\n                  >\r\n                    <ScrollContainer\r\n                      className='scroll-container'\r\n                      vertical={false}\r\n                      horizontal={true}\r\n                    >\r\n                      <AnimatePresence initial={animatedThumbnails}>\r\n                        {showThumbnails !== false && (\r\n                          <motion.div\r\n                            initial={'hidden'}\r\n                            exit={'hidden'}\r\n                            animate={'visible'}\r\n                            transition={{\r\n                              type: 'spring',\r\n                              duration: 0.75\r\n                            }}\r\n                            variants={thumbnailVariants}\r\n                            className='thumbnails flex justify-centre align-centre gap-2 md:gap-4 rounded-sm mx-auto'\r\n                          >\r\n                            {images.map((img, index) => (\r\n                              <img\r\n                                className={\r\n                                  'thumbnail ' +\r\n                                  (imageIndex === index ? 'active' : '')\r\n                                }\r\n                                src={img.src}\r\n                                style={\r\n                                  imageIndex === index\r\n                                    ? { border: activeThumbnailBorder }\r\n                                    : { border: thumbnailBorder }\r\n                                }\r\n                                onClick={() => {\r\n                                  setCurrentSlide(index)\r\n                                }}\r\n                                alt={img.caption}\r\n                                onLoad={() => setImagesLoaded(true)}\r\n                              />\r\n                              // <span style={{color: \"white\"}}>{index}</span>\r\n                            ))}\r\n                          </motion.div>\r\n                        )}\r\n                      </AnimatePresence>\r\n                    </ScrollContainer>\r\n                  </div>\r\n                </div>\r\n                {/* </React.Fragment> */}\r\n                {/* )} */}\r\n\r\n                {/* </TransformWrapper>      */}\r\n              </motion.div>\r\n            </Portal>\r\n          )}\r\n        </AnimatePresence>\r\n      </AnimateSharedLayout>\r\n    </div>\r\n  )\r\n}\r\n","import React, {useEffect} from 'react'\r\nimport styles from './styles.module.css'\r\nimport './css/tailwind.css';\r\nimport {VideoLightbox} from \"./VideoLightbox\";\r\nimport {AnimImage as Image} from \"./AnimImage\";\r\nimport {SlideshowLightbox} from \"./SlideshowLightbox\";\r\nimport axios from \"axios\";\r\n\r\nconst initLightboxJS = (licenseKey, plan_type) => {\r\n  console.log(\"init lightboxjs\")\r\n  var body = {\r\n    license_key: licenseKey,\r\n    plan_type: plan_type,\r\n  };\r\n\r\n  axios.post('https://lightboxjs-server.herokuapp.com/license', body)\r\n    .then(function (response) {\r\n      let licenseKeyValid = response.data.license_valid;\r\n\r\n      if (!licenseKeyValid) {\r\n        console.warn(\"Lightbox.js: Invalid license key specified, a valid license key must be provided.\")\r\n      }\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    });\r\n\r\n};\r\n\r\nexport { VideoLightbox, Image, SlideshowLightbox, initLightboxJS }"],"names":["themes","day","background","iconColor","night","lightbox","isBrowser","window","defaultMapInteractionValue","scale","translation","x","y","thumbnailVariants","visible","opacity","hidden","thumbnailBorder","animTransitionDefault","type","stiffness","damping","duration","slideshowAnimTransition","props","useState","isOverlayDisplayed","setIsOverlayDisplayed","isZoomed","setIsZoomed","zoomImg","setZoomImg","fullScreenImage","roundedImage","imgContainHeight","setImgContainHeight","imgContainWidth","setImgContainWidth","setImgLayoutID","imgAnimation","backgroundColor","setBackgroundColor","setIconColor","state","React","panImage","setPanImage","mapInteractionValue","setMapInteractionValue","isAnimating","setIsAnimating","imgElem","useRef","changeCursor","cursor_name","current","parentElement","style","cursor","useEffect","imageUrl","img","image","src","Image","onload","contain","screen","width","height","naturalWidth","naturalHeight","onerror","err","console","error","theme","reducedMotionMediaQuery","checkAndInitReducedMotion","removeEventListener","initSmoothZoom","transition","zoomIn","zoomOut","resetMapInteractionValue","matchMedia","matches","addEventListener","className","AnimatePresence","motion","onClick","title","whileTap","key","Portal","div","initial","exit","animate","position","top","left","zIndex","event","e","modals","document","getElementsByClassName","arr_modals","Array","from","i","length","contains","target","checkModalClick","color","ZoomIn","ZoomOut","XLg","MapInteractionCSS","maxScale","minScale","disablePan","value","onChange","reinitZoomSettings","setTimeout","mapInteractionChange","onAnimationComplete","onAnimationStart","ref","defaultPrevented","rangeSize","imgSlideIndex","direction","setImgSlideIndex","showModal","setShowModal","isSlideshowPlaying","setIsSlideshowPlaying","children","map","obj","images","setImages","imageIndex","continuous","startSlide","reactSwipeOptions","setReactSwipeOptions","slideshowInterval","roundedImages","setRoundedImages","showControls","setShowControls","lightboxIdentifier","imageFullScreen","fullScreen","setLockAxisY","licenseKey","setAnimTransition","setWidth","setImgSwipeMotion","isBrowserFullScreen","setIsBrowserFullScreen","enableMagnifyingGlass","setMagnifyingGlass","imagesLoaded","setImagesLoaded","refIndex","setRefIndex","isInit","setIsInit","setUsesDataAttr","zoomRef","setZoomBtnRef","zoomRefs","initZoomRef2","push","setThumbnailBorder","showThumbnails","setShowThumbnails","animatedThumbnails","animateThumbnails","setImgAnimation","arrowStyle","isMobile","keyPressHandler","updateCurrentSlide","closeModal","handleWindowResize","innerWidth","callback","timeDelay","savedCallbackRef","reactSwipeEl","exitFullScreen","exitFullscreen","webkitExitFullscreen","msExitFullscreen","closeFullScreen","removeFullScreenChangeEventListeners","newDirection","resetSlideAnim","resetMapInteraction","updateImageSlideshow","openModal","num","paneNodes","apply","_","index","React.createElement","Magnifier","mgShowOverflow","TransformWrapper","onWheel","wheelEvent","onZoom","zoomEvent","centerZoomedOut","initialScale","TransformComponent","wrapperStyle","marginLeft","marginRight","contentStyle","id","log","intervalID","setInterval","clearInterval","undefined","img_gallery","querySelectorAll","img_elements","usesAttr","getAttribute","reactSwipeOptionConfig","classList","add","alt","filter","elem","class","AnimateSharedLayout","FullscreenExit","Fullscreen","lightbox_elem","getElementById","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","GridFill","Search","imageContainerH","imageContainerW","initImageDimensions","PauseCircleFill","PlayCircleFill","next","prev","custom","ReactSwipe","swipeOptions","el","childCount","display","ScrollContainer","vertical","horizontal","variants","border","newIndex","slide","caption","onLoad","video","layoutId","controls","videoSrc","poster","posterUrl","plan_type","axios","post","license_key","then","response","data","license_valid","warn"],"mappings":"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"}