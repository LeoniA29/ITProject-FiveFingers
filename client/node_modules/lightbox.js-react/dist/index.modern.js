import e,{useState as n,useRef as t,useEffect as i,createElement as o}from"react";import{AnimateSharedLayout as r,AnimatePresence as a,motion as l}from"framer-motion";import{XLg as c,ZoomIn as s,ZoomOut as u,FullscreenExit as m,Fullscreen as d,GridFill as h,Search as g,PauseCircleFill as f,PlayCircleFill as v}from"react-bootstrap-icons";import{MapInteractionCSS as p}from"@silvia-odwyer/react-map-interaction-fork";import{contain as y}from"intrinsic-scale";import{Portal as w}from"react-portal";import{TransformWrapper as b,TransformComponent as k}from"react-zoom-pan-pinch";import C from"react-indiana-drag-scroll";import E from"react-magnifier";import x from"react-swipe";import N from"axios";var I={day:{background:"white",iconColor:"black"},night:{background:"#151515",iconColor:"silver"},lightbox:{background:"rgba(0, 0, 0, 0.4)",iconColor:"silver"}},S=function(i){var o=n(!1),s=o[0],u=o[1],m=n(i.iconColor?i.iconColor:I.lightbox.iconColor),d=m[0],h=m[1],g=e.useState(i.backgroundColor?i.backgroundColor:I.lightbox),f=g[0],v=g[1],p=e.useState()[0];return t(null),e.useEffect(function(){i.theme&&I[i.theme]&&(v(I[i.theme].background),h(I[i.theme].iconColor))},[p]),e.createElement("div",{className:"lightboxjs"},e.createElement(r,{type:"crossfade"},e.createElement(a,null,!1!==s&&e.createElement(l.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},key:"videoOverlay",style:{position:"fixed",top:0,left:0,backgroundColor:f,width:"100vw",height:"100vh",zIndex:999999},className:"slideshowAnimContainer",onClick:function(){return u(!1)}},e.createElement("div",{className:"lightboxContainer"},e.createElement("section",{className:"iconsHeader imageModal",style:{color:d}},e.createElement(l.div,{whileTap:{scale:.95},className:"closeIcon"},e.createElement(c,{onClick:function(){u(!1)}}))),e.createElement(l.div,{className:"slideshowInnerContainer imageModal",key:"image",onAnimationComplete:function(){setIsAnimating(!1)},onAnimationStart:function(){setIsAnimating(!0)}},e.createElement(l.video,{layoutId:"vidMotion-"+i.id,className:"cursor-pointer m-auto",key:i.id,controls:!0},e.createElement("source",{src:i.videoSrc,type:"video/mp4"}))))),e.createElement(l.video,{onClick:function(){return u(i.id)},layoutId:"vidMotion-"+i.id,className:"cursor-pointer",key:i.id,width:500,controls:!1,poster:i.posterUrl},e.createElement("source",{src:i.videoSrc,type:"video/mp4"})))))};function L(){return(L=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var A=function(){return"undefined"!=typeof window},T=["children"],M={day:{background:"white",iconColor:"black"},night:{background:"#151515",iconColor:"silver"},lightbox:{background:"rgba(0, 0, 0, 0.4)",iconColor:"silver"}},z={scale:1,translation:{x:0,y:0}},F=function(o){var r=function(e,n){if(null==e)return{};var t,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n.indexOf(t=r[i])>=0||(o[t]=e[t]);return o}(o,T),m=n(!1),d=m[0],h=m[1],g=n(!1),f=g[0],v=g[1],b=n(0),k=b[0],C=b[1],E=(n(!!r.fullScreenImage&&r.fullScreenImage),n(!r.roundedImage||r.roundedImage),n(500)),x=E[0],N=E[1],I=n(426),S=I[0],F=I[1],O=n(r.imgAnimation?r.imgAnimation:"imgMotion-")[1],j=n(r.backgroundColor?r.backgroundColor:M.lightbox.background),B=j[0],W=j[1],H=n(r.iconColor?r.iconColor:M.lightbox.iconColor),q=H[0],R=H[1],_=e.useState()[0],P=n(!0),D=P[0],Z=P[1],K=n(z),V=K[0],U=K[1],G=n(!1),J=G[0],Q=G[1],X=t(null),Y=function(e){X.current.parentElement.parentElement.style.cursor=""+e};i(function(){var e,n;e=r.image.src,(n=new Image).src=e,n.onload=function(){var e=y(.92*screen.width,.8*screen.height,n.naturalWidth,n.naturalHeight),t=e.width;N(e.height),F(t)},n.onerror=function(e){console.error(e)},r.theme&&M[r.theme]&&(W(M[r.theme].background),R(M[r.theme].iconColor));var t=ie();return function(){t.removeEventListener("change",t)}},[_]);var $=function(){X.current.parentElement.style.transition="transform 0.2s"},ee=function(){Y("zoom-out"),v(!0),C(k+1)},ne=function(){Y("zoom-in"),v(!1),C(k-1)},te=function(){U({scale:1,translation:{x:0,y:0}})},ie=function(){var e;return A&&((e=window.matchMedia("(prefers-reduced-motion: reduce)"))&&!e.matches||O(null),e.addEventListener("change",void(e.matches&&O(null)))),e};return e.createElement("div",{className:"lightboxjs"},e.createElement(a,null,e.createElement(l.img,L({},r,{src:r.image.src,onClick:function(){return h(r.image.title)},whileTap:{scale:.97},style:r.style,className:"cursor-pointer",key:r.image.title})),e.createElement(w,null,e.createElement(a,null,!1!==d&&e.createElement(l.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},key:"imgOverlay",style:{position:"fixed",top:0,left:0,backgroundColor:B,width:"100vw",height:"100vh",zIndex:999999},className:"flex h-screen slideshowAnimContainer",onClick:function(e){return function(e){for(var n=document.getElementsByClassName("imageModal"),t=Array.from(n),i=0;i<t.length;i++)if(t[i].contains(e.target))return;h(!1)}(e)}},e.createElement(l.div,{className:"lightboxContainer"},e.createElement("section",{className:"iconsHeader imageModal",style:{color:q}},e.createElement(l.div,{whileTap:{scale:.95}},e.createElement(s,{onClick:function(){return ee()}})),e.createElement(l.div,{whileTap:{scale:.95}},e.createElement(u,{onClick:function(){return ne()}})),e.createElement(l.div,{whileTap:{scale:.95},className:"closeIcon"},e.createElement(c,{onClick:function(){te(),h(!1)}}))),e.createElement(l.div,{className:"imageInnerContainer imageModal"},e.createElement(p,{maxScale:2.6,minScale:1,disablePan:D,value:V,onChange:function(e){!function(e){Z(!1),function(e){e.scale>V.scale?(v(!0),$()):e.scale<V.scale?(v(!1),$()):X.current.parentElement.style.transition=""}(e),U(e),e.scale==z.scale?(Z(!0),te(),setTimeout(function(){$()},300)):e.scale>z.scale&&!J&&Y("all-scroll")}(e)},zoomIn:k},e.createElement(l.img,{src:r.image.src,key:"image",onAnimationComplete:function(){Q(!1)},onAnimationStart:function(){Q(!0)},className:"m-auto",style:{width:S,height:x},ref:X,onClick:function(e){e.defaultPrevented||(f||J?ne():ee())}})))))))))},O={visible:{opacity:1,y:0},hidden:{opacity:0,y:100}},j={scale:1,translation:{x:0,y:0}},B={day:{background:"white",iconColor:"black",thumbnailBorder:"solid transparent 2px"},night:{background:"#151515",iconColor:"silver",thumbnailBorder:"solid rgb(138, 138, 138) 2px"},lightbox:{background:"rgba(12, 12, 12, 0.93)",iconColor:"silver",thumbnailBorder:"solid rgb(138, 138, 138) 2px"}},W={x:{type:"spring",stiffness:300,damping:30},opacity:{duration:.2}},H={opacity:{duration:.2}},q=function(e){var p,N=n([0,0]),I=N[0],S=I[0],T=I[1],M=N[1],z=n(!1),F=z[0],q=z[1],R=n(!1),_=R[0],P=R[1],D=n(e.children?e.children.map(function(e){return e.props}):[]),Z=D[0],K=D[1],V=((S-0)%(p=Z.length-0)+p)%p+0,U=n({continuous:!0,startSlide:0}),G=U[0],J=U[1],Q=n(e.slideshowInterval?e.slideshowInterval:1100)[0],X=n(!e.roundedImages||e.roundedImages),Y=X[0],$=X[1],ee=n(!e.showControls||e.showControls),ne=ee[0],te=ee[1],ie=n(!!e.lightboxIdentifier&&e.lightboxIdentifier)[0],oe=n(!!e.fullScreen&&e.fullScreen)[0],re=(n(e.licenseKey?e.licenseKey:""),n(!1)[1]),ae=n(!1)[1],le=n(W)[1],ce=n(!0)[1],se=(n(0),n(0)),ue=se[0],me=se[1],de=n(j)[1],he=n("x")[1],ge=(n(!1),n(!1)),fe=ge[0],ve=ge[1],pe=n(!1),ye=pe[0],we=pe[1],be=n(!1),ke=be[0],Ce=be[1],Ee=n(0),xe=Ee[0],Ne=Ee[1],Ie=n(500),Se=Ie[0],Le=Ie[1],Ae=n(426),Te=Ae[0],Me=Ae[1],ze=n(!1),Fe=ze[0],Oe=ze[1],je=(n(!1),n(!1)[1]),Be=(n(!1),n(!1),n(!1),t(null)),We=n(null)[1],He=n([])[0],qe=(n(null),function(e){e&&He.push(e)}),Re=n(e.backgroundColor?e.backgroundColor:B.night.background),_e=Re[0],Pe=Re[1],De=n(e.iconColor?e.iconColor:B.night.iconColor),Ze=De[0],Ke=De[1],Ve=n(e.thumbnailBorder?e.thumbnailBorder:B.night.thumbnailBorder),Ue=Ve[0],Ge=Ve[1],Je=n(!!e.showThumbnails&&e.showThumbnails),Qe=Je[0],Xe=Je[1],Ye=n(!e.animateThumbnails||e.animateThumbnails)[0],$e=n(e.imgAnimation?e.imgAnimation:"imgDrag")[1],en=n(e.arrowStyle?e.arrowStyle:"dark")[0],nn=ue<=768,tn=function(e){var n=e.key;"ArrowLeft"==n?un(-1):"ArrowRight"==n?un(1):"Escape"!=n||fe||gn()};function on(){me(window.innerWidth)}var rn,an,ln,cn,sn=function(){fe&&(function(e){e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.msExitFullscreen&&e.msExitFullscreen()}(document),ve(!1),wn())},un=function(e){dn(),we(!1),hn(),M([S+e,e]),nn&&We(Be)},mn=function(e){hn(),M([S+e,e])},dn=function(){le(W)},hn=function(){ce(!0),de({scale:1,translation:{x:0,y:0}}),ae(!1)},gn=function(){fe&&sn(),_&&P(!1),hn(),ae(!1),q(!1)},fn=function(e){M([e,1]),q(!0)},vn=Array.apply(null,Array(Z.length)).map(function(e,n){return o("div",{key:n},1==ye?o(E,{src:Z[n].src,className:"imageModal mx-auto mt-0 magnifyWrapper",height:Se,width:Te,mgShowOverflow:!1,style:{width:Te,height:Se}}):o("div",null,o(b,{ref:qe,onWheel:{wheelEvent:yn},onZoom:pn,centerZoomedOut:!0,initialScale:1},o(k,{wrapperStyle:{marginLeft:"auto",marginRight:"auto"},contentStyle:{width:"100vw",height:"100vh",marginLeft:"auto",marginRight:"auto"},key:n},o("img",{className:"mx-auto "+(oe?"":"object-contain")+" imageModal "+(Y?"rounded-lg":""),src:Z[n].src,id:"img"})))))}),pn=function(e,n){console.log("ZOOM EVENT ",e),1==e.state.scale&&($e("imgDrag"),he("x"),console.log("reinit drag anim"))},yn=function(e,n){console.log("WHEEL EVENT ",e),$e("fade"),re(!1)},wn=function(){document.removeEventListener("fullscreenchange",sn),document.removeEventListener("webkitfullscreenchange",sn),document.removeEventListener("MSFullscreenChange",sn),document.removeEventListener("mozfullscreenchange",sn)};return rn=function(){mn(1)},an=_?Q:null,ln=t(),i(function(){ln.current=rn},[rn]),i(function(){if(null!==an){var e=setInterval(function(){ln.current()},an);return function(){return clearInterval(e)}}},[an]),i(function(){console.log("use effect",e.fullScreen),null!=e.showControls&&te(e.showControls),A&&me(window.innerWidth),window.innerWidth<=768&&$e("fade"),document.addEventListener("keydown",tn),A&&window.addEventListener("resize",on);var n=function(){var e="";return A&&((e=window.matchMedia("(prefers-reduced-motion: reduce)"))&&!e.matches||$e("fade"),e.addEventListener("change",void(e.matches&&$e("fade")))),e}();if(!Fe){if(ie){var t=document.querySelectorAll("[data-lightboxjs]"),i=[],o=!1;if(t.length>0){for(var r=function(e){var n=t[e];n.getAttribute("data-lightboxjs")==ie&&(n.addEventListener("click",function(){var n=G;n.startSlide=e,J(n),fn(e)},!1),n.classList.add("cursor-pointer"),o=!0,i.push({src:n.src,alt:n.alt}))},a=0;a<=t.length-1;a++)r(a);o&&je(!0),K(i)}}else e.children&&K(e.children.filter(function(e){return"img"==e.type}).map(function(e){return e.props}));Oe(!0)}return e.theme&&B[e.theme]&&(Pe(B[e.theme].background),Ke(B[e.theme].iconColor),Ge(B[e.theme].thumbnailBorder)),e.fullScreen&&1==e.fullScreen&&($e("fade"),$(!1)),function(){A&&(window.removeEventListener("resize",on),document.removeEventListener("keydown",tn)),n.removeEventListener("change",n)}},[tn]),o("div",{class:e.className+" lightboxjs"},0!=ie?e.children:null,0!=ie?null:e.children.filter(function(e){return"img"==e.type}).map(function(e,n){return o("img",L({},e.props,{class:e.props.className+" cursor-pointer",onClick:function(){console.log("hi2");var e=G;e.startSlide=n,J(e),fn()},key:n,whileTap:{scale:.97}}))}),o(r,{type:"crossfade"},o(a,{initial:!1},!1!==F&&o(w,null,o(l.div,{className:"slideshowAnimContainer",key:"slideshowAnimContainer",id:"slideshowAnim",initial:{opacity:0,scale:.98},exit:{opacity:0,scale:.98},animate:{opacity:1,scale:1},transition:{duration:.2}},o("div",{className:"lightboxContainer",style:{backgroundColor:_e}},o("section",{className:"iconsHeader imageModal "+en+"_header_icon",style:{color:Ze}},ne&&o("div",{className:"controls"},o(l.div,{whileTap:{scale:.95}},o(s,{onClick:function(){console.log("zoom refs",He[xe]),He[xe].zoomIn()}})),o(l.div,{whileTap:{scale:.95}},o(u,{onClick:function(){console.log("zoom refs ",He[xe]),He[xe].zoomOut()}})),o(l.div,{whileTap:{scale:.95}},o(fe?m:d,{onClick:function(){var e;fe?sn():((e=document.getElementById("slideshowAnim")).requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),ve(!0),document.addEventListener("fullscreenchange",sn),document.addEventListener("webkitfullscreenchange",sn),document.addEventListener("MSFullscreenChange",sn),document.addEventListener("mozfullscreenchange",sn))}})),o(l.div,{whileTap:{scale:.95}},o(h,{onClick:function(){Xe(!Qe)}})),nn?null:o(l.div,{whileTap:{scale:.95}},o(g,{onClick:function(){return ye?$e("imgDrag"):function(){console.log("Init img dimensions ");var e,n,t=document.getElementById("img");nn?(n=.92,e=t.naturalWidth>t.naturalHeight?.65:.57):(n=.92,e=.71);var i=y(screen.width*n,screen.height*e,t.naturalWidth,t.naturalHeight),o=i.width,r=i.height;console.log("Width ",o),console.log("height ",r),Le(r),Me(o)}(),void we(!ye)}})),o(l.div,{whileTap:{scale:.95},className:"slideshowPlayBtn"},o(_?f:v,{onClick:function(){_?(le(W),P(!1)):(we(!1),le(H),mn(1),P(!0))}}))),o(l.div,{whileTap:{scale:.95},className:"closeIcon"},o(c,{onClick:function(){gn()}}))),o("div",{className:"next1 "+en+"_icon imageModal",onClick:function(){Ne(xe+1),cn.next(),M([S+1,1])}},o("span",null,"❯")),o("div",{className:"prev1 "+en+"_icon imageModal",onClick:function(){Ne(xe-1),cn.prev()}},o("span",null,"❮")),o(a,{initial:!1,custom:T},o(x,{className:"slideshowInnerContainer  "+(Qe?"slideshowInnerContainerThumbnails":"")+" ",swipeOptions:G,ref:function(e){return cn=e},childCount:Z.length},vn)),o("div",{className:"thumbnailsOuterContainer imageModal",style:ke?{}:{display:"displayHidden"}},o(C,{className:"scroll-container",vertical:!1,horizontal:!0},o(a,{initial:Ye},!1!==Qe&&o(l.div,{initial:"hidden",exit:"hidden",animate:"visible",transition:{type:"spring",duration:.75},variants:O,className:"thumbnails flex justify-centre align-centre gap-2 md:gap-4 rounded-sm mx-auto"},Z.map(function(e,n){return o("img",{className:"thumbnail "+(V===n?"active":""),src:e.src,style:V===n?{border:"solid rgba(107, 133, 206, 0.6) 2px"}:{border:Ue},onClick:function(){var e,t;t=(e=n)>S?1:-1,le(H),hn(),M([e,t]),cn.slide(e,500)},alt:e.caption,onLoad:function(){return Ce(!0)}})})))))))))))},R=function(e,n){console.log("init lightboxjs"),N.post("https://lightboxjs-server.herokuapp.com/license",{license_key:e,plan_type:n}).then(function(e){e.data.license_valid||console.warn("Lightbox.js: Invalid license key specified, a valid license key must be provided.")}).catch(function(e){console.log(e)})};export{F as Image,q as SlideshowLightbox,S as VideoLightbox,R as initLightboxJS};
//# sourceMappingURL=index.modern.js.map
